"use strict";(self.webpackChunk_examples_base=self.webpackChunk_examples_base||[]).push([[502],{1502:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});n(6976);var r=n(7416),i=n(4218);function a(){var e=(0,r.x6)("/api/getData",{formatData:function(e){return{total:e.total,data:e.data}},query:function(e,t){return{page:e,pageSize:10,data:t}}});return(0,i.jsx)(r.QV,{btns:[{label:"\u65b0\u589e",type:"primary"}],table:e,columns:[{title:"\u540d\u5b57",key:"name",props:{widget:"input",initialValue:"zzz",widgetProps:{preIcon:"user",placeholder:"\u8f93\u5165\u7528\u6237\u540d"}}},{title:"\u5e74\u9f84",key:"age",props:{widget:"select",option:[{label:"20",value:20},{label:"10",value:10}]}},{title:"\u5730\u5740",key:"info"}]})}},7416:function(e,t,n){n.d(t,{PB:function(){return V},QV:function(){return k},x6:function(){return j}});var r=n(7896),i=n(6976),a=n(5924),o=n(4218),l=function(e){var t=e.children,n=e.loading,r=void 0!==n&&n;return(0,o.jsx)(a.aN,{loading:r,style:{display:"block"},bgColor:"rgba(255, 255, 255, 0.4)",children:(0,o.jsx)(o.Fragment,{children:t})})},u=n(2867),s=n(7162),c=n.n(s),d=n(4795),f=n(5642),p=n(5228),h=(0,i.createContext)({}),v=function(){return(0,i.useContext)(h)},y=function(e){var t=e.style,n=e.columns,r=(0,i.useState)(1),l=(0,u.Z)(r,2),s=l[0],h=l[1],y=(0,i.useState)(!1),g=(0,u.Z)(y,2),m=g[0],x=g[1],b=v(),S=b.formatData,k=b.updateStore,j=b.query,w=b.key,O=b.searchValues,V=(0,i.useRef)(!1),Z=function(e,t){return j?j(t||s,e||O):{page:t||s,pageSize:10}},P=Z().pageSize||10,C=(0,f.ZP)([w,{method:"POST",body:Z()}],p.W,{revalidateOnMount:!1,revalidateOnFocus:!1}),z=C.data,J=(C.error,C.mutate),N=(C.isValidating,(0,i.useCallback)(function(){var e=(0,d.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),h(1),e.next=4,(0,p.W)(w,{method:"POST",body:Z(t,1)}).then((function(e){x(!1),J(e,!1),console.log(123)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p.W,J,JSON.stringify(O)])),D=(0,i.useCallback)(function(){var e=(0,d.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),h(t),(0,p.W)(w,{method:"POST",body:Z(void 0,t)}).then((function(e){x(!1),J(e,!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p.W,J,JSON.stringify(O),s]);return(0,i.useEffect)((function(){var e={};n.forEach((function(t){var n;if(null!=t&&null!=(n=t.props)&&n.initialValue){var r=t.key||t.props.key;e[r]=t.props.initialValue}})),k({data:null==z?void 0:z.data,total:null==z?void 0:z.total,loading:m,onSearch:N}),V.current||(V.current=!0,k({searchValues:e}),x(!0),(0,p.W)(w,{method:"POST",body:Z(e)}).then((function(e){x(!1),J(e,!1)})))}),[JSON.stringify(z),N,m,JSON.stringify(n)]),(0,o.jsx)(a.iA,{columns:n,data:S&&z?S(z).data:null==z?void 0:z.data,style:t,footer:(0,o.jsx)(a.tl,{current:s,pageSize:P,total:S&&z?S(z).total:null==z?void 0:z.total,divider:!0,onChange:function(e){D(e)}})})},g=n(1461),m=function(e){var t=e.option;return(0,o.jsxs)(a.Ph,{children:[(0,o.jsx)(a.Ph.Option,{value:"",children:"\u8bf7\u9009\u62e9"}),t&&t.map((function(e){return(0,o.jsx)(a.Ph.Option,{value:e.value,children:e.label},e.value)}))]})},x=["widgetProps","key","widget","label","initialValue"],b={input:a.II,radio:a.Y8,checkbox:a.XZ,switch:a.rs,select:m,textarea:a.gx,dateInput:a.Wr,timePicker:a.jI,monthPicker:a.lH},S=function(e){var t=v(),n=t.updateStore,l=(t.reset,t.onSearch),u=e.columns,s=function(){var e={};return u.forEach((function(t){if(t.props&&Object.keys(t.props).length>0){var n=t.props,i=n.widgetProps,a=n.key,l=n.widget,u=n.label,s=n.initialValue,c=(0,g.Z)(n,x),d=t.key||a,f=b[l];e[d]=(0,r.Z)({label:t.title||u,children:(0,o.jsx)(f,(0,r.Z)({},i))},c,{initialValue:s})}})),e};(0,i.useEffect)((function(){n({searchValues:(0,r.Z)({},s().defaultValues)})}),[JSON.stringify(s().defaultValues)]);return(0,o.jsx)(a.l0,{style:{background:"#fff",paddingBottom:5},resetOnSubmit:!1,onSubmit:function(e){!function(e){var t=e.initial,i=e.current;n({searchValues:(0,r.Z)({},t,i)}),l(i)}({initial:e.initial,current:e.current})},onSubmitError:function(e){return e.filed?(0,r.Z)({},e.filed):null},fields:s(),children:function(e){var t=e.fields;e.state,e.canSubmit,e.resetForm;return(0,o.jsx)("div",{children:(0,o.jsxs)(a.X2,{gutter:10,children:[Object.keys(t).map((function(e){return(0,o.jsx)(a.JX,{fixed:!0,children:t[e]},e)})),(0,o.jsx)(a.JX,{style:{marginTop:31},children:(0,o.jsx)(a.zx,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"})})]})})}})},k=function(e){var t=e.table,n=e.columns,u=e.btns,s=void 0===u?[]:u,c=t.key,d=t.data,f=t.reset,p=t.refersh,v=t.updateStore,g=t.formatData,m=t.query,x=t.searchValues,b=t.loading,k=t.onSearch,j=(0,i.useMemo)((function(){return{data:[],reset:f,refersh:p,key:c,updateStore:v,formatData:g,query:m,searchValues:x,onSearch:k}}),[JSON.stringify(d),f,p,c,v,g,m,JSON.stringify(x),k]);return(0,o.jsx)(h.Provider,{value:j,children:(0,o.jsxs)(l,{loading:b,children:[(0,o.jsx)(S,{columns:n}),s.length>0&&(0,o.jsx)("div",{style:{marginTop:14,background:"#fff",padding:10},children:s.map((function(e,t){return(0,o.jsx)(a.zx,(0,r.Z)({style:{marginRight:5}},e,{children:e.label}),t.toString())}))}),(0,o.jsx)(y,{columns:n})]})})},j=function(e,t){void 0===t&&(t={});var n=t,a=n.formatData,o=n.query,l=(0,i.useState)({total:1,data:[],selectChecked:[],selectCheckedRows:[],searchValues:{},loading:!1}),s=(0,u.Z)(l,2),c=s[0],d=s[1];return(0,r.Z)({key:e,reset:function(){},refersh:function(){},onSearch:function(){},formatData:a,query:o,updateStore:function(e){d((0,r.Z)({},c,e))}},c)},w=["visible","title","onClose","width","buttons","children"];function O(e){var t=e.visible,n=e.title,i=void 0===n?"":n,l=e.onClose,u=void 0===l?null:l,s=e.width,c=void 0===s?800:s,d=e.buttons,f=void 0===d?[]:d,p=e.children,h=(0,g.Z)(e,w);return(0,o.jsx)(a.dy,(0,r.Z)({title:i,isOpen:t,onClose:u&&u,size:c,bodyStyle:{padding:"0 10px 45px 10px"}},h,{footer:f.map((function(e,t){var n=e.label,r=void 0===n?"":n,i=e.onPress,l=e.show,u=void 0===l||l,s=e.loading,c=e.type,d=void 0===c?"primary":c,f=e.width,p=void 0===f?60:f,h=e.size,v=void 0===h?"default":h;return u&&(0,o.jsx)(a.zx,{style:{width:p},type:d,size:v,onClick:i&&i,loading:s,children:r},t)})),children:p}))}var V=(0,i.memo)(O)}}]);
//# sourceMappingURL=502.js.map