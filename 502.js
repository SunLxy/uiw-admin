"use strict";(self.webpackChunk_examples_base=self.webpackChunk_examples_base||[]).push([[502],{1502:function(e,t,i){i.r(t),i.d(t,{default:function(){return r}});i(6976);var n=i(1965),a=i(4218);function r(){var e=(0,n.x6)("/api/getData",{formatData:function(e){return{total:e.total,data:e.data}},query:function(e,t){return{page:e,pageSize:10,data:t}}});return console.log(e),(0,a.jsx)(n.QV,{btns:[{label:"\u65b0\u589e",type:"primary"}],table:e,columns:[{title:"\u540d\u5b57",key:"name",props:{widget:"input",initialValue:"zzz",widgetProps:{preIcon:"user",placeholder:"\u8f93\u5165\u7528\u6237\u540d"}}},{title:"\u5e74\u9f84",key:"age",width:50,props:{widget:"select",option:[{label:"20",value:20},{label:"10",value:10}]}},{title:"\u5730\u5740",key:"info",props:{widget:"textarea"}},{title:"Switch",key:"Switch",props:{widget:"switch"}},{title:"timePicker",key:"timePicker",props:{widget:"timePicker"}},{title:"MonthPicker",key:"MonthPicker",props:{widget:"monthPicker"}},{title:"DateInput",key:"DateInput",props:{widget:"dateInput"}},{title:"Radio",key:"Radio",props:{widget:"radio",option:[{label:"\u7537",value:"man"},{label:"\u5973",value:"girl"}]}},{title:"SearchSelect",key:"SearchSelect",props:{widget:"searchSelect",widgetProps:{option:[{label:"a",value:2},{label:"aa",value:3},{label:"aaa",value:4}]}}}]})}},1965:function(e,t,i){i.d(t,{PB:function(){return C},QV:function(){return Z},x6:function(){return P}});var n=i(7896),a=i(6976),r=i(9372),l=i(4218),o=function(e){var t=e.children,i=e.loading,n=void 0!==i&&i;return(0,l.jsx)(r.aN,{loading:n,style:{display:"block"},bgColor:"rgba(255, 255, 255, 0.4)",children:(0,l.jsx)(l.Fragment,{children:t})})},u=i(2867),s=i(7162),c=i.n(s),d=i(4795),p=i(5642),f=i(5228),h=(0,a.createContext)({}),v=function(){return(0,a.useContext)(h)},g=function(e){e.style;var t=e.columns,i=(0,a.useState)(1),n=(0,u.Z)(i,2),o=n[0],s=n[1],h=(0,a.useState)({data:[],total:0}),g=(0,u.Z)(h,2),y=g[0],m=g[1],b=v(),k=b.formatData,x=b.updateStore,S=b.query,w=b.key,j=b.searchValues,Z=(0,a.useMemo)((function(){var e={};return t.forEach((function(t){var i;if(null!=t&&null!=(i=t.props)&&i.initialValue){var n=t.key||t.props.key;e[n]=t.props.initialValue}})),e}),[JSON.stringify(t)]),P=(0,a.useRef)(!1),V=(0,a.useCallback)((function(){return S?S(o,!1===P.current?Z:j):{page:1,pageSize:10}}),[o,JSON.stringify(Z),JSON.stringify(j)]),O=V().pageSize||10,C=(0,p.ZP)([w,{method:"POST",body:V()}],f.W,{revalidateOnFocus:!1}),z=C.data,J=C.isValidating,D=(0,a.useCallback)((0,d.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(1);case 1:case"end":return e.stop()}}),e)}))),[]),N=(0,a.useCallback)((function(e){s(e)}),[]);return(0,a.useEffect)((function(){var e={};t.forEach((function(t){var i;if(null!=t&&null!=(i=t.props)&&i.initialValue){var n=t.key||t.props.key;e[n]=t.props.initialValue}}));var i={data:null==z?void 0:z.data,total:null==z?void 0:z.total,loading:!z||J,onSearch:D};P.current||(P.current=!0,i.searchValues=e),x(i),z&&m(z)}),[JSON.stringify(z),J,D,JSON.stringify(t)]),(0,l.jsx)(r.iA,{columns:t,data:k&&z?k(z).data:(null==z?void 0:z.data)||(null==y?void 0:y.data),footer:(0,l.jsx)(r.tl,{current:o,pageSize:O,total:k&&z?k(z).total:(null==z?void 0:z.total)||(null==y?void 0:y.total),divider:!0,onChange:function(e){N(e)}})})},y=i(1461),m=["option"],b=function(e){var t=e.option,i=(0,y.Z)(e,m);return(0,l.jsxs)(r.Ph,(0,n.Z)({},i,{children:[(0,l.jsx)(r.Ph.Option,{value:"",children:"\u8bf7\u9009\u62e9"}),t&&t.map((function(e){return(0,l.jsx)(r.Ph.Option,{value:e.value,children:e.label},e.value)}))]}))},k=["option"],x=function(e){var t=e.option,i=(0,y.Z)(e,k);return(0,l.jsx)(r.Ee,(0,n.Z)({},i,{children:t&&t.map((function(e){return(0,l.jsx)(r.Y8,{value:e.value,children:e.label},e.value)}))}))},S=["widgetProps","key","widget","label","initialValue"],w={input:r.II,radio:x,checkbox:r.XZ,switch:r.rs,select:b,searchSelect:r.ul,textarea:r.gx,dateInput:r.Wr,timePicker:r.jI,monthPicker:r.lH},j=function(e){var t=v(),i=t.updateStore,o=(t.reset,t.onSearch),u=e.columns,s=function(){var e={};return u.forEach((function(t){if(t.props&&Object.keys(t.props).length>0){var i=t.props,a=i.widgetProps,r=i.key,o=i.widget,u=i.label,s=i.initialValue,c=(0,y.Z)(i,S),d=t.key||r,p=w[o];e[d]=(0,n.Z)({label:t.title||u,children:(0,l.jsx)(p,(0,n.Z)({},a))},c,{initialValue:s})}})),e};(0,a.useEffect)((function(){i({searchValues:(0,n.Z)({},s().defaultValues)})}),[JSON.stringify(s().defaultValues)]);return(0,l.jsx)(r.l0,{style:{background:"#fff",paddingBottom:5},resetOnSubmit:!1,onSubmit:function(e){!function(e){var t=e.initial,a=e.current;i({searchValues:(0,n.Z)({},t,a)}),o(a)}({initial:e.initial,current:e.current})},onSubmitError:function(e){return e.filed?(0,n.Z)({},e.filed):null},fields:s(),children:function(e){var t=e.fields;e.state,e.canSubmit,e.resetForm;return(0,l.jsx)("div",{children:(0,l.jsxs)(r.X2,{gutter:12,children:[Object.keys(t).map((function(e){return(0,l.jsx)(r.JX,{fixed:!0,style:{width:"20%"},children:t[e]},e)})),(0,l.jsx)(r.JX,{style:{marginTop:31},children:(0,l.jsx)(r.zx,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"})})]})})}})},Z=function(e){var t=e.table,i=e.columns,u=e.btns,s=void 0===u?[]:u,c=t.key,d=t.data,p=t.reset,f=t.refersh,v=t.updateStore,y=t.formatData,m=t.query,b=t.searchValues,k=t.loading,x=t.onSearch,S=(0,a.useMemo)((function(){return{data:[],reset:p,refersh:f,key:c,updateStore:v,formatData:y,query:m,searchValues:b,onSearch:x}}),[JSON.stringify(d),p,f,c,v,y,m,JSON.stringify(b),x]);return console.log("loading---\x3e",k),(0,l.jsx)(h.Provider,{value:S,children:(0,l.jsxs)(o,{loading:k,children:[(0,l.jsx)(j,{columns:i}),s.length>0&&(0,l.jsx)("div",{style:{marginTop:14,background:"#fff",padding:10},children:s.map((function(e,t){return(0,l.jsx)(r.zx,(0,n.Z)({style:{marginRight:5}},e,{children:e.label}),t.toString())}))}),(0,l.jsx)(g,{columns:i})]})})},P=function(e,t){void 0===t&&(t={});var i=t,r=i.formatData,l=i.query,o=(0,a.useState)({total:1,data:[],selectChecked:[],selectCheckedRows:[],searchValues:{},loading:!1}),s=(0,u.Z)(o,2),c=s[0],d=s[1];return(0,n.Z)({key:e,reset:function(){},refersh:function(){},onSearch:function(){},formatData:r,query:l,updateStore:function(e){d((0,n.Z)({},c,e))}},c)},V=["visible","title","onClose","width","buttons","children"];function O(e){var t=e.visible,i=e.title,a=void 0===i?"":i,o=e.onClose,u=void 0===o?null:o,s=e.width,c=void 0===s?800:s,d=e.buttons,p=void 0===d?[]:d,f=e.children,h=(0,y.Z)(e,V);return(0,l.jsx)(r.dy,(0,n.Z)({title:a,isOpen:t,onClose:u&&u,size:c,bodyStyle:{padding:"0 10px 45px 10px"}},h,{footer:p.map((function(e,t){var i=e.label,n=void 0===i?"":i,a=e.onPress,o=e.show,u=void 0===o||o,s=e.loading,c=e.type,d=void 0===c?"primary":c,p=e.width,f=void 0===p?60:p,h=e.size,v=void 0===h?"default":h;return u&&(0,l.jsx)(r.zx,{style:{width:f},type:d,size:v,onClick:a&&a,loading:s,children:n},t)})),children:f}))}var C=(0,a.memo)(O)}}]);
//# sourceMappingURL=502.js.map