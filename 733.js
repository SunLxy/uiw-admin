"use strict";(self.webpackChunk_examples_base=self.webpackChunk_examples_base||[]).push([[733],{2733:function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var n=i(2867),r=i(6976),a=i(1965),l=i(5642);var o=i(4218);function u(){var e=(0,a.x6)("/api/getData",{formatData:function(e){return{total:e.total,data:e.data}},query:function(e,t){return{page:e,pageSize:10,data:t}}}),t=(0,r.useState)(""),i=(0,n.Z)(t,2),u=i[0],s=i[1],c=function(e){var t=(0,l.ZP)("/api/city/?val=".concat(e)),i=t.data,n=t.error;return{city:null===i||void 0===i?void 0:i.data,isLoading:!n&&!i,isError:n}}(u),d=c.city,p=void 0===d?[]:d,f=c.isLoading;return(0,o.jsx)(a.QV,{btns:[{label:"\u65b0\u589e",type:"primary"},{label:"\u91cd\u7f6e",onClick:e.onSearch}],table:e,columns:[{title:"\u540d\u5b57",key:"name",props:{widget:"input",initialValue:"zzz",widgetProps:{preIcon:"user",placeholder:"\u8f93\u5165\u7528\u6237\u540d"}}},{title:"\u5e74\u9f84",key:"age",width:50,props:{widget:"select",option:[{label:"20",value:20},{label:"10",value:10}]}},{title:"\u5730\u5740",key:"info",props:{label:"\u8be6\u7ec6\u5730\u5740",key:"detailAddress",widget:"textarea"}},{title:"Switch",key:"Switch",props:{widget:"switch"}},{title:"timePicker",key:"timePicker",props:{widget:"timePicker"}},{title:"timePicker",key:"timePicker1",props:{widget:"timePicker"}},{title:"MonthPicker",key:"MonthPicker",props:{widget:"monthPicker"}},{title:"DateInput",key:"DateInput",props:{widget:"dateInput"}},{title:"Radio",key:"Radio",props:{widget:"radio",option:[{label:"\u7537",value:"man"},{label:"\u5973",value:"girl"}]}},{title:"\u5bb6\u4e61",key:"city",width:50,props:{widget:"searchSelect",widgetProps:{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165\u9009\u62e9",showSearch:!0,loading:f,option:p,onSearch:function(e){s(e)}}}}]})}},1965:function(e,t,i){i.d(t,{PB:function(){return V},QV:function(){return P},x6:function(){return Z}});var n=i(7896),r=i(6976),a=i(9372),l=i(4218),o=function(e){var t=e.children,i=e.loading,n=void 0!==i&&i;return(0,l.jsx)(a.aN,{loading:n,style:{display:"block"},bgColor:"rgba(255, 255, 255, 0.4)",children:(0,l.jsx)(l.Fragment,{children:t})})},u=i(2867),s=i(7162),c=i.n(s),d=i(4795),p=i(5642),f=i(5228),h=(0,r.createContext)({}),v=function(){return(0,r.useContext)(h)},y=function(e){e.style;var t=e.columns,i=(0,r.useState)(1),n=(0,u.Z)(i,2),o=n[0],s=n[1],h=(0,r.useState)({data:[],total:0}),y=(0,u.Z)(h,2),g=y[0],m=y[1],k=v(),b=k.formatData,x=k.updateStore,S=k.query,w=k.key,j=k.searchValues,P=(0,r.useMemo)((function(){var e={};return t.forEach((function(t){var i;if(null!=t&&null!=(i=t.props)&&i.initialValue){var n=t.key||t.props.key;e[n]=t.props.initialValue}})),e}),[JSON.stringify(t)]),Z=(0,r.useRef)(!1),C=(0,r.useCallback)((function(){return S?S(o,!1===Z.current?P:j):{page:1,pageSize:10}}),[o,JSON.stringify(P),JSON.stringify(j)]),O=C().pageSize||10,V=(0,p.ZP)([w,{method:"POST",body:C()}],f.W,{revalidateOnFocus:!1}),z=V.data,J=V.isValidating,D=(0,r.useCallback)((0,d.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(1);case 1:case"end":return e.stop()}}),e)}))),[]),N=(0,r.useCallback)((function(e){s(e)}),[]);return(0,r.useEffect)((function(){var e={};t.forEach((function(t){var i;if(null!=t&&null!=(i=t.props)&&i.initialValue){var n=t.key||t.props.key;e[n]=t.props.initialValue}}));var i={data:null==z?void 0:z.data,total:null==z?void 0:z.total,loading:!z||J,onSearch:D};Z.current||(Z.current=!0,i.searchValues=e),x(i),z&&m(z)}),[JSON.stringify(z),J,D,JSON.stringify(t)]),(0,l.jsx)(a.iA,{columns:t,data:b&&z?b(z).data:(null==z?void 0:z.data)||(null==g?void 0:g.data),footer:(0,l.jsx)(a.tl,{current:o,pageSize:O,total:b&&z?b(z).total:(null==z?void 0:z.total)||(null==g?void 0:g.total),divider:!0,onChange:function(e){N(e)}})})},g=i(1461),m=["option"],k=function(e){var t=e.option,i=(0,g.Z)(e,m);return(0,l.jsxs)(a.Ph,(0,n.Z)({},i,{children:[(0,l.jsx)(a.Ph.Option,{value:"",children:"\u8bf7\u9009\u62e9"}),t&&t.map((function(e){return(0,l.jsx)(a.Ph.Option,{value:e.value,children:e.label},e.value)}))]}))},b=["option"],x=function(e){var t=e.option,i=(0,g.Z)(e,b);return(0,l.jsx)(a.Ee,(0,n.Z)({},i,{children:t&&t.map((function(e){return(0,l.jsx)(a.Y8,{value:e.value,children:e.label},e.value)}))}))},S=["widgetProps","key","widget","label","initialValue"],w={input:a.II,radio:x,checkbox:a.XZ,switch:a.rs,select:k,searchSelect:a.ul,textarea:a.gx,dateInput:a.Wr,timePicker:a.jI,monthPicker:a.lH},j=function(e){var t=v(),i=t.updateStore,o=(t.reset,t.onSearch),u=e.columns,s=(0,r.useMemo)((function(){var e={};return u.forEach((function(t){if(t.props&&Object.keys(t.props).length>0){var i=t.props,r=i.widgetProps,a=i.key,o=i.widget,u=i.label,s=i.initialValue,c=(0,g.Z)(i,S),d=a||t.key,p=w[o];e[d]=(0,n.Z)({label:u||t.title,children:(0,l.jsx)(p,(0,n.Z)({},r))},c,{initialValue:s})}})),e}),[JSON.stringify(u)]),c=4-Object.keys(s).length%5;return(0,l.jsx)(a.l0,{style:{background:"#fff",paddingBottom:10,marginBottom:14},resetOnSubmit:!1,onSubmit:function(e){!function(e){var t=e.initial,r=e.current;i({searchValues:(0,n.Z)({},t,r)}),o(r)}({initial:e.initial,current:e.current})},onSubmitError:function(e){return e.filed?(0,n.Z)({},e.filed):null},fields:s,children:function(e){var t=e.fields;e.state,e.canSubmit,e.resetForm;return(0,l.jsx)("div",{children:(0,l.jsxs)(a.X2,{gutter:12,children:[Object.keys(t).map((function(e){return(0,l.jsx)(a.JX,{fixed:!0,style:{width:"20%"},children:t[e]},e)})),Array(c).fill("").map((function(e,t){return(0,l.jsx)(a.JX,{fixed:!0,style:{width:"20%"}},t)})),(0,l.jsx)(a.JX,{align:"middle",children:(0,l.jsx)(a.zx,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"})})]})})}})},P=function(e){var t=e.table,i=e.columns,u=e.btns,s=void 0===u?[]:u,c=t.key,d=t.data,p=t.reset,f=t.refersh,v=t.updateStore,g=t.formatData,m=t.query,k=t.searchValues,b=t.loading,x=t.onSearch,S=(0,r.useMemo)((function(){return{data:[],reset:p,refersh:f,key:c,updateStore:v,formatData:g,query:m,searchValues:k,onSearch:x}}),[JSON.stringify(d),p,f,c,v,g,m,JSON.stringify(k),x]);return(0,l.jsx)(h.Provider,{value:S,children:(0,l.jsxs)(o,{loading:b,children:[(0,l.jsx)(j,{columns:i}),s.length>0&&(0,l.jsx)("div",{style:{background:"#fff",padding:10},children:s.map((function(e,t){return(0,l.jsx)(a.zx,(0,n.Z)({style:{marginRight:5}},e,{children:e.label}),t.toString())}))}),(0,l.jsx)(y,{columns:i})]})})},Z=function(e,t){void 0===t&&(t={});var i=t,a=i.formatData,l=i.query,o=(0,r.useState)({total:1,data:[],selectChecked:[],selectCheckedRows:[],searchValues:{},loading:!1}),s=(0,u.Z)(o,2),c=s[0],d=s[1];return(0,n.Z)({key:e,reset:function(){},refersh:function(){},onSearch:function(){},formatData:a,query:l,updateStore:function(e){d((0,n.Z)({},c,e))}},c)},C=["visible","title","onClose","width","buttons","children"];function O(e){var t=e.visible,i=e.title,r=void 0===i?"":i,o=e.onClose,u=void 0===o?null:o,s=e.width,c=void 0===s?800:s,d=e.buttons,p=void 0===d?[]:d,f=e.children,h=(0,g.Z)(e,C);return(0,l.jsx)(a.dy,(0,n.Z)({title:r,isOpen:t,onClose:u&&u,size:c,bodyStyle:{padding:"0 10px 45px 10px"}},h,{footer:p.map((function(e,t){var i=e.label,n=void 0===i?"":i,r=e.onPress,o=e.show,u=void 0===o||o,s=e.loading,c=e.type,d=void 0===c?"primary":c,p=e.width,f=void 0===p?60:p,h=e.size,v=void 0===h?"default":h;return u&&(0,l.jsx)(a.zx,{style:{width:f},type:d,size:v,onClick:r&&r,loading:s,children:n},t)})),children:f}))}var V=(0,r.memo)(O)}}]);
//# sourceMappingURL=733.js.map