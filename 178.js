/*! For license information please see 178.js.LICENSE.txt */
(self.webpackChunk_examples_base=self.webpackChunk_examples_base||[]).push([[178],{178:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return T}});var r=t(3028),i=t(4795),o=t(7162),l=t.n(o),s=t(6976),u=t(2867),a=t(4103),c=t(1546),d=t(3763),f=t.n(d),m=t(7896),h=t(4218);var p=function(e){return void 0===e&&(e={}),(0,s.useEffect)((function(){document.title=e.title||""}),[e.title]),(0,h.jsx)(s.Fragment,{children:s.Children.toArray(e.children).map((function(e){return s.isValidElement(e)?s.cloneElement(e,(0,m.Z)({},e.props||{})):null}))})},v=t(1462),x=function(e){void 0===e&&(e={});var n=(0,s.useMemo)((function(){return e.logo&&(0,h.jsx)("img",{src:e.logo,alt:e.projectName||"logo"})}),[e.logo]),t=(0,s.useMemo)((function(){return e.projectName&&(0,h.jsx)("h1",{children:e.projectName})}),[e.projectName]);return(0,s.useMemo)((function(){return(0,h.jsx)("div",{className:"uiw-admin-global-title",children:(0,h.jsxs)(v.rU,{to:"/",style:e.collapsed?{justifyContent:"center"}:{},children:[n,!e.collapsed&&t]})})}),[e.collapsed])},j=t(5596),g=t(800);function b(e,n,t,r,i){return void 0===e&&(e=[]),e.map((function(e,o){var l={key:o,icon:e.icon},u=!0;return Reflect.has(e,"isAuth")&&(u=Reflect.get(e,"isAuth")),e.index||e.hideInMenu||!u||"*"===e.path?(0,h.jsx)(s.Fragment,{},o):(i&&(l.className=f()({"uiw-admin-global-sider-menu-collapsed":n})),(0,g.LX)({path:e.path},location.pathname)&&(l.active=!0),e.routes?(n&&(l.overlayProps={isOutside:!0,usePortal:!0}),(0,h.jsx)(j.Z.SubMenu,(0,m.Z)({},l,{text:e.name||"-",collapse:n,children:b(e.routes,n,t,r)}))):(0,h.jsx)(j.Z.Item,(0,m.Z)({},l,{onClick:function(){r(e.path,{replace:!0})},to:e.path,text:e.name||"-"})))}))}var y=function(e){void 0===e&&(e={});var n=e,t=n.routes,r=void 0===t?[]:t,i=n.collapsed,o=(0,g.TH)(),l=(0,g.s0)(),s=o.pathname;return(0,h.jsx)(j.Z,{theme:"dark",inlineCollapsed:!!i,style:{padding:"0 12px"},children:b(r,!!i,s,l,!0)})},S=t(5924),w=function(e){var n=e.routeMap,t=(0,g.TH)(),r=n.breadcrumb.get(t.pathname)||[];return(0,h.jsx)(S.aG,{children:null==r?void 0:r.map((function(e,n){return(0,h.jsx)(S.aG.Item,{children:e.name},n)}))})},k=t(9249),F=t(7371),Z=t(1461),C=["element","component","children","path"];function N(e){void 0===e&&(e=[]);var n=[];return e.forEach((function(e){var t=(0,m.Z)({},e);if(e.routes){var r=N(t.routes);t.routes=r}if(e.path&&"*"!==e.path){var i=t.path,o=(0,Z.Z)(t,C);n.push((0,m.Z)({},o,{path:i,key:i}))}})),n}var E=function(){function e(n){(0,k.Z)(this,e),this.breadcrumb=new Map([]),this.flat=[],this.init(n)}return(0,F.Z)(e,[{key:"init",value:function(e,n){var t=this;e.forEach((function(e){var r=(n||[]).concat([e]);e.routes&&t.init(e.routes,r),e.path&&"*"!==e.path&&t.breadcrumb.set(e.path,r),t.flat.push(e)}))}}]),e}(),R=function(e){return(0,h.jsx)("div",{style:{height:"100%",overflow:"auto"},children:e.children})},M=t(8777),z=["title","icon","onClick","divider","render"];function A(e){var n=(0,g.s0)(),t=e.menus,r=void 0===t?[]:t,i=e.profile,o=void 0===i?{}:i,l=e.onReloadAuth,u=[{title:(0,h.jsxs)("span",{style:{fontSize:15},children:["\u8d26\u53f7 ",(null==o?void 0:o.userName)||"admin"]}),icon:"user"},{divider:!0}].concat((0,M.Z)(r),[{title:"\u5237\u65b0\u6743\u9650",icon:"reload",onClick:function(){return l()}},{divider:!0},{title:"\u9000\u51fa\u767b\u5f55",icon:"logout",onClick:function(){return n("/login",{replace:!0})}}]),a=(0,h.jsx)("div",{style:{width:150},children:(0,h.jsx)(S.v2,{children:u.map((function(e,n){var t=e.title,r=e.icon,i=e.onClick,o=e.divider,l=e.render,u=(0,Z.Z)(e,z);return o?(0,h.jsx)(S.v2.Divider,{},n):l?(0,h.jsx)(s.Fragment,{children:l},n):(0,h.jsx)(S.v2.Item,(0,m.Z)({text:t,icon:r},u,{onClick:i&&i}),n)}))})});return(0,h.jsx)("div",{className:"uiw-global-header-menu",children:(0,h.jsx)("span",{className:"uiw-global-header-menu",children:(0,h.jsx)(S.J2,{trigger:"click",placement:"bottomRight",content:a,children:null!=o&&o.avatar?(0,h.jsx)("img",{src:o.avatar}):(0,h.jsx)(S.qE,{icon:"user",size:"default"})})})})}function O(){var e=document;return e.mozFullScreen||e.webkitIsFullScreen||e.webkitFullScreen||e.msFullScreen}var P=function(){if(!function(){var e=document;return e.fullscreenEnabled||e.mozFullScreenEnabled||e.webkitFullscreenEnabled||e.msFullscreenEnabled}())return null;var e=(0,s.useState)(!1),n=(0,u.Z)(e,2),t=n[0],r=n[1];if(t){var i=document.documentElement;i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullScreen?i.webkitRequestFullScreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen()}else if(O()){var o=document;o.exitFullscreen?o.exitFullscreen():o.webkitCancelFullScreen?o.webkitCancelFullScreen():o.mozCancelFullScreen?o.mozCancelFullScreen():o.msExitFullscreen&&o.msExitFullscreen()}var l=function(){!O()&&t&&r(!1)};return(0,s.useEffect)((function(){return window.addEventListener("resize",l),function(){window.removeEventListener("resize",l,!1)}})),(0,s.useMemo)((function(){return(0,h.jsx)("span",{onClick:function(){return r(!t)},style:{fontSize:18,marginRight:15,cursor:"pointer"},children:(0,h.jsx)(S.JO,{type:t?"shrink":"arrows-alt"})})}),[t])},I=a.ZP.Header,q=a.ZP.Footer,J=a.ZP.Sider,L=a.ZP.Content;function _(e){var n=e||{},t=n.routes,r=void 0===t?[]:t,i=n.footer,o=n.projectName,l=void 0===o?"UIW Admin":o,d=n.profile,m=void 0===d?{}:d,v=n.menus,j=void 0===v?[]:v,g=n.onReloadAuth,b=(0,s.useState)(!1),S=(0,u.Z)(b,2),k=S[0],F=S[1],Z=N(r),C=(0,s.useMemo)((function(){return(0,h.jsx)(q,{children:i})}),[i]),M=s.useMemo((function(){return(0,h.jsx)(y,{collapsed:k,routes:Z})}),[JSON.stringify(Z),k]),z=s.useMemo((function(){return new E(Z)}),[JSON.stringify(Z)]),O=(0,s.useMemo)((function(){return(0,h.jsxs)("div",{style:{display:"flex",justifyItems:"center",alignItems:"center"},children:[null==m?void 0:m.menuLeft,(0,h.jsx)(P,{}),(0,h.jsx)(A,{onReloadAuth:g,profile:m,menus:j})]})}),[m,j]);return(0,h.jsxs)(s.Fragment,{children:[(0,h.jsx)(p,{title:l||""}),(0,h.jsxs)(a.ZP,{hasSider:!0,style:{height:"100%"},children:[(0,h.jsxs)(J,{collapsed:k,className:f()("uiw-admin-global-sider-menu",{}),children:[(0,h.jsx)(x,{collapsed:k,projectName:l,logo:e.logo}),M]}),(0,h.jsxs)(a.ZP,{children:[(0,h.jsxs)(I,{className:"uiw-admin-global-header",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)(c.Z,{basic:!0,icon:k?"menu-unfold":"menu-fold",style:{fontSize:12,marginRight:20},onClick:function(){return F(!k)}}),(0,h.jsx)(w,{routeMap:z})]}),O]}),(0,h.jsx)(L,{className:"uiw-admin-global-content",children:(0,h.jsx)(R,{children:e.children})}),C]})]})]})}var H=t(5642);var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{routes:[]},n=e.routes,o=(0,H.ZP)(["/api/reloadAuth",{method:"POST"}],{revalidateOnMount:!1,revalidateOnFocus:!1,onSuccess:function(e){e&&200===e.code&&(sessionStorage.setItem("token",e.token),sessionStorage.setItem("auth",JSON.stringify(e.authList||[])),window.location.reload())}}),s=o.mutate,u={onReloadAuth:function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),routes:n,menus:[{title:"\u6b22\u8fce\u6765\u5230uiw",icon:"smile",onClick:function(){}},{title:"\u4fee\u6539\u5bc6\u7801",icon:"setting",onClick:function(){}}],profile:{avatar:t(8257),menuLeft:(0,h.jsx)("div",{style:{marginRight:15},children:(0,h.jsx)(S.Ct,{count:66,children:(0,h.jsx)(S.JO,{type:"bell",color:"#343a40",style:{fontSize:20}})})})}};return(0,h.jsx)(_,(0,r.Z)((0,r.Z)((0,r.Z)({},u),e),{},{children:(0,h.jsx)(g.j3,{})}))}},3763:function(e,n){var t;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],n=0;n<arguments.length;n++){var t=arguments[n];if(t){var o=typeof t;if("string"===o||"number"===o)e.push(t);else if(Array.isArray(t)){if(t.length){var l=i.apply(null,t);l&&e.push(l)}}else if("object"===o)if(t.toString===Object.prototype.toString)for(var s in t)r.call(t,s)&&t[s]&&e.push(s);else e.push(t.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(t=function(){return i}.apply(n,[]))||(e.exports=t)}()},8257:function(e,n,t){"use strict";e.exports=t.p+"36447999380a95380e00.png"}}]);
//# sourceMappingURL=178.js.map