"use strict";(self.webpackChunk_examples_base=self.webpackChunk_examples_base||[]).push([[80],{4080:function(e,t,n){n.d(t,{PB:function(){return J},A9:function(){return F},QV:function(){return w},x6:function(){return C}});var r=n(7896),i=n(6976),a=n(9372),l=n(4218),o=function(e){var t=e.children,n=e.loading,r=void 0!==n&&n;return(0,l.jsx)(a.aN,{loading:r,style:{display:"block"},bgColor:"rgba(255, 255, 255, 0.4)",children:(0,l.jsx)(l.Fragment,{children:t})})},u=n(2867),s=n(7162),c=n.n(s),d=n(4795),f=n(5642),h=n(5228),v=(0,i.createContext)({}),m=function(){return(0,i.useContext)(v)},p=function(e){e.style;var t=e.columns,n=(0,i.useState)(1),r=(0,u.Z)(n,2),o=r[0],s=r[1],v=(0,i.useState)({data:[],total:0}),p=(0,u.Z)(v,2),x=p[0],b=p[1],g=m(),y=g.formatData,j=g.updateStore,k=g.query,S=g.key,Z=g.searchValues,w=(0,i.useMemo)((function(){var e={};return t.forEach((function(t){var n;if(null!=t&&null!=(n=t.props)&&n.initialValue){var r=t.key||t.props.key;e[r]=t.props.initialValue}})),e}),[JSON.stringify(t)]),C=(0,i.useRef)(!1),O=(0,i.useCallback)((function(){return k?k(o,!1===C.current?w:Z):{page:1,pageSize:10}}),[o,JSON.stringify(w),JSON.stringify(Z)]),V=O().pageSize||10,P=(0,f.ZP)([S,{method:"POST",body:O()}],h.W,{revalidateOnFocus:!1}),J=P.data,N=P.isValidating,z=(0,i.useCallback)((0,d.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(1);case 1:case"end":return e.stop()}}),e)}))),[]),E=(0,i.useCallback)((function(e){s(e)}),[]);return(0,i.useEffect)((function(){var e={};t.forEach((function(t){var n;if(null!=t&&null!=(n=t.props)&&n.initialValue){var r=t.key||t.props.key;e[r]=t.props.initialValue}}));var n={data:null==J?void 0:J.data,total:null==J?void 0:J.total,loading:!J||N,onSearch:z};C.current||(C.current=!0,n.searchValues=e),j(n),J&&b(J)}),[JSON.stringify(J),N,z,JSON.stringify(t)]),(0,l.jsx)(a.iA,{columns:t,data:y&&J?y(J).data:(null==J?void 0:J.data)||(null==x?void 0:x.data),footer:(0,l.jsx)(a.tl,{current:o,pageSize:V,total:y&&J?y(J).total:(null==J?void 0:J.total)||(null==x?void 0:x.total),divider:!0,onChange:function(e){E(e)}})})},x=n(1461),b=["option"],g=function(e){var t=e.option,n=(0,x.Z)(e,b);return(0,l.jsxs)(a.Ph,(0,r.Z)({},n,{children:[(0,l.jsx)(a.Ph.Option,{value:"",children:"\u8bf7\u9009\u62e9"}),t&&t.map((function(e){return(0,l.jsx)(a.Ph.Option,{value:e.value,children:e.label},e.value)}))]}))},y=["option"],j=function(e){var t=e.option,n=(0,x.Z)(e,y);return(0,l.jsx)(a.Ee,(0,r.Z)({},n,{children:t&&t.map((function(e){return(0,l.jsx)(a.Y8,{value:e.value,children:e.label},e.value)}))}))},k=["widgetProps","key","widget","label","initialValue"],S={input:a.II,radio:j,checkbox:a.XZ,switch:a.rs,select:g,searchSelect:a.ul,textarea:a.gx,dateInput:a.Wr,timePicker:a.jI,monthPicker:a.lH},Z=function(e){var t=m(),n=t.updateStore,o=(t.reset,t.onSearch),u=e.columns,s=(0,i.useMemo)((function(){var e={};return u.forEach((function(t){if(t.props&&Object.keys(t.props).length>0){var n=t.props,i=n.widgetProps,a=n.key,o=n.widget,u=n.label,s=n.initialValue,c=(0,x.Z)(n,k),d=a||t.key,f=S[o];e[d]=(0,r.Z)({label:u||t.title,children:(0,l.jsx)(f,(0,r.Z)({},i))},c,{initialValue:s})}})),e}),[JSON.stringify(u)]),c=4-Object.keys(s).length%5;return(0,l.jsx)(a.l0,{style:{background:"#fff",paddingBottom:10,marginBottom:14},resetOnSubmit:!1,onSubmit:function(e){!function(e){var t=e.initial,i=e.current;n({searchValues:(0,r.Z)({},t,i)}),o(i)}({initial:e.initial,current:e.current})},onSubmitError:function(e){return e.filed?(0,r.Z)({},e.filed):null},fields:s,children:function(e){var t=e.fields;e.state,e.canSubmit,e.resetForm;return(0,l.jsx)("div",{children:(0,l.jsxs)(a.X2,{gutter:12,children:[Object.keys(t).map((function(e){return(0,l.jsx)(a.JX,{fixed:!0,style:{width:"20%"},children:t[e]},e)})),Array(c).fill("").map((function(e,t){return(0,l.jsx)(a.JX,{fixed:!0,style:{width:"20%"}},t)})),(0,l.jsx)(a.JX,{align:"middle",children:(0,l.jsx)(a.zx,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"})})]})})}})},w=function(e){var t=e.table,n=e.columns,u=e.btns,s=void 0===u?[]:u,c=t.key,d=t.data,f=t.reset,h=t.refersh,m=t.updateStore,x=t.formatData,b=t.query,g=t.searchValues,y=t.loading,j=t.onSearch,k=(0,i.useMemo)((function(){return{data:[],reset:f,refersh:h,key:c,updateStore:m,formatData:x,query:b,searchValues:g,onSearch:j}}),[JSON.stringify(d),f,h,c,m,x,b,JSON.stringify(g),j]);return(0,l.jsx)(v.Provider,{value:k,children:(0,l.jsxs)(o,{loading:y,children:[(0,l.jsx)(Z,{columns:n}),s.length>0&&(0,l.jsx)("div",{style:{background:"#fff",padding:10},children:s.map((function(e,t){return(0,l.jsx)(a.zx,(0,r.Z)({style:{marginRight:5}},e,{children:e.label}),t.toString())}))}),(0,l.jsx)(p,{columns:n})]})})},C=function(e,t){void 0===t&&(t={});var n=t,a=n.formatData,l=n.query,o=(0,i.useState)({total:1,data:[],selectChecked:[],selectCheckedRows:[],searchValues:{},loading:!1}),s=(0,u.Z)(o,2),c=s[0],d=s[1];return(0,r.Z)({key:e,reset:function(){},refersh:function(){},onSearch:function(){},formatData:a,query:l,updateStore:function(e){d((0,r.Z)({},c,e))}},c)},O=["visible","title","onClose","width","buttons","children"],V=["label","show"];function P(e){var t=e.visible,n=e.title,i=void 0===n?"":n,o=e.onClose,u=void 0===o?null:o,s=e.width,c=void 0===s?800:s,d=e.buttons,f=void 0===d?[]:d,h=e.children,v=(0,x.Z)(e,O);return(0,l.jsx)(a.dy,(0,r.Z)({title:i,isOpen:t,onClose:u&&u,size:c,bodyStyle:{padding:"0 10px 45px 10px"}},v,{footer:f.map((function(e,t){var n=e.label,i=void 0===n?"":n,o=e.show,u=void 0===o||o,s=(0,x.Z)(e,V);return u&&(0,l.jsx)(a.zx,(0,r.Z)({},s,{children:i}),t)})),children:h}))}var J=(0,i.memo)(P),N=["label","btnType","show","onClick"];var z=function(e){var t=e.formfields,n=e.onSubmit,o=e.onChange,u=e.onSubmitError,s=e.btns,c=void 0===s?[]:s,d=e.span,f=void 0===d?3:d,h=function(e){var t=e.canSubmit,n=e.resetForm;return c.map((function(e,i){var o=e.label,u=e.btnType,s=e.show,c=void 0===s||s,d=e.onClick,f=(0,x.Z)(e,N);return c?"submit"===u?(0,l.jsx)(a.zx,(0,r.Z)({disabled:!t(),htmlType:"submit"},f,{children:o}),i):"reset"===u?(0,l.jsx)(a.zx,(0,r.Z)({onClick:function(){return n}},f,{children:o}),i):(0,l.jsx)(a.zx,(0,r.Z)({},f,{onClick:null==d?void 0:d(),children:o}),i):null}))};return(0,l.jsx)(a.l0,{style:{background:"#fff",paddingBottom:10,marginBottom:14},resetOnSubmit:!1,onSubmit:function(e){var t=e.initial,r=e.current;return null==n?void 0:n(t,r)},onChange:function(e){var t=e.initial,n=e.current;return null==o?void 0:o(t,n)},onSubmitError:function(e){if(!u)return e.filed?(0,r.Z)({},e.filed):null;u(e)},fields:t,children:function(e){var t=e.fields,n=(e.state,e.canSubmit),r=e.resetForm;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("div",{className:"w-form-grid",style:{gridTemplateColumns:"repeat("+f+", 1fr)"},children:Object.keys(t).map((function(e){return(0,l.jsx)("div",{style:{flex:1},children:t[e]},e)}))}),(0,l.jsx)("div",{className:"w-form-item-center",children:h({canSubmit:n,resetForm:r})})]})}})},E=["hide","widgetProps","key","widget","label","initialValue"],I={input:a.II,radio:j,checkbox:a.XZ,switch:a.rs,select:g,searchSelect:a.ul,textarea:a.gx,dateInput:a.Wr,timePicker:a.jI,monthPicker:a.lH};var F=function(e){var t=e.formDatas,n=void 0===t?[]:t,o=e.title,u=void 0===o?"":o,s=e.formType,c=void 0===s?"card":s,d=e.renderWidgetsList,f=void 0===d?{}:d,h=(0,i.useMemo)((function(){return function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});var n=(0,r.Z)({},I,t),i={};return e.forEach((function(e){if(e){var t=e.hide,a=void 0!==t&&t,o=e.widgetProps,u=e.key,s=e.widget,c=e.label,d=e.initialValue,f=(0,x.Z)(e,E);if(!a){var h=u,v=n[s];i[h]=(0,r.Z)({label:c,children:(0,l.jsx)(v,(0,r.Z)({},o))},f,{initialValue:d})}}})),i}(n,f)}),[n,f]),v=(0,i.useMemo)((function(){var t=(0,r.Z)({},e,{formfields:h});return"card"===c?(0,l.jsx)(a.Zb,{title:u,children:(0,l.jsx)(z,(0,r.Z)({},t))}):"collapse"===c?(0,l.jsx)(a.UO,{activeKey:["1"],children:(0,l.jsx)(a.UO.Panel,{header:u,children:(0,l.jsx)(z,(0,r.Z)({},t))},"1")}):(0,l.jsxs)("div",{children:[u&&(0,l.jsx)("h3",{children:u}),(0,l.jsx)(z,(0,r.Z)({},t))]})}),[c,n,u]);return(0,l.jsx)("div",{style:{flex:1},children:v})}}}]);
//# sourceMappingURL=80.js.map