"use strict";(self.webpackChunk_examples_base=self.webpackChunk_examples_base||[]).push([[655],{4655:function(e,r,n){n.r(r),n.d(r,{default:function(){return k}});var t=n(6976),a=n(9372),i=n(2729),l=n(1965),o=n(523),u=n(3028),s=n(4795),c=n(7162),d=n.n(c),f=n(7387),p=n(4218);var v=function(e){var r=e.name,n=e.type,t=e.render,i=e.initValue,l=e.rules,o=e.options,s=e.attributes,c=e.onItemChange,d=e.control,v=e.trigger,h=(0,f.bc)({name:r,control:d,rules:l,defaultValue:i}).field,m=h.onChange,g=h.name,x=h.onBlur,b=h.value,y=h.ref;return"input"===n?(0,p.jsx)("div",{style:{flex:1},children:(0,p.jsx)(a.II,(0,u.Z)({ref:y,name:g,value:b||"",onChange:function(e){m(e),v(g),null===c||void 0===c||c(g,e)},onBlur:function(){x(),v(g)}},s))}):"select"===n?(0,p.jsx)("div",{style:{flex:1},children:(0,p.jsxs)(a.Ph,(0,u.Z)((0,u.Z)({name:g,ref:y,onChange:function(e){m(e),v(g),null===c||void 0===c||c(g,e)},onBlur:x(),value:b},s),{},{children:[(0,p.jsx)(a.Ph.Option,{children:(null===s||void 0===s?void 0:s.placeholder)||"\u8bf7\u9009\u62e9"}),o.map((function(e){var r=e.disabled,n=e.label,t=e.value;return(0,p.jsx)(a.Ph.Option,{disabled:r,value:t,children:n},t)}))]}))}):"render"===n?null===t||void 0===t?void 0:t({name:g,ref:y,onChange:m,onBlur:x}):null},h=function(e){var r=e.formDatas,n=void 0===r?[]:r,t=e.onItemChange,i=e.span,l=void 0===i?3:i,o=e.control,s=e.trigger,c=e.errors;return(0,p.jsx)("div",{className:"w-form-grid",style:{gridTemplateColumns:"repeat(".concat(l,", 1fr)")},children:n.map((function(e){var r=["w-form-label",null!==e&&void 0!==e&&e.rules?"w-form-label-require":null].filter(Boolean).join(" ").trim(),n=(0,u.Z)((0,u.Z)({},e),{},{onItemChange:t,control:o,trigger:s}),i=(0,p.jsx)(v,(0,u.Z)({},n));return e.hide?null:(0,p.jsxs)("div",{children:[(0,p.jsxs)(a.X2,{className:"w-form-item-center",children:[(0,p.jsxs)(a.JX,{fixed:!0,className:r,children:[(null===e||void 0===e?void 0:e.rules)&&(0,p.jsx)("span",{style:{paddingTop:5,paddingRight:5},children:"*"}),(0,p.jsx)("span",{style:(0,u.Z)({paddingLeft:null!==e&&void 0!==e&&e.rules?0:12},{fontWeight:600,color:"#000000d9"}),children:(null===e||void 0===e?void 0:e.label)||""})]}),(0,p.jsx)(a.JX,{children:i})]}),(0,p.jsx)(a.X2,{children:c[e.name]&&c[e.name].message&&(0,p.jsxs)(a.JX,{className:"w-form-label-error",children:[" ",c[e.name].message]})})]},e.name)}))})},m=function(e){return e&&"object"===(r=e,Object.prototype.toString.call(r).slice(8,-1).toLowerCase());var r};function g(e,r){var n=(0,f.cI)(),a=n.getValues,i=n.setValue,l=n.trigger,o=n.control,c=n.formState.errors,v=n.reset,g=n.setError,x=n.clearErrors,b=(0,u.Z)({submitErrorCheck:!0,processValuesFunc:null},e.setOptions);(0,t.useImperativeHandle)(r,(function(){return{setValue:function(){var e=(0,s.Z)(d().mark((function e(r,n,t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i(r,n,t));case 1:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}(),getValues:function(){var e=(0,s.Z)(d().mark((function e(){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.submitErrorCheck){e.next=5;break}return e.next=3,l();case 3:if(!m(n=c)||!Object.keys(n).length){e.next=5;break}return e.abrupt("return",null);case 5:if(r=a(),"function"!==typeof b.processValuesFunc){e.next=8;break}return e.abrupt("return",b.processValuesFunc(r));case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}(),errors:function(){var e=(0,s.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),reset:function(){var e=(0,s.Z)(d().mark((function e(){var r=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.apply(void 0,r));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),trigger:function(){var e=(0,s.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setError:function(e,r){return g(e,r)},clearErrors:function(e){return x(e)}}}),[e.setOptions,l,v,g,x,c,a,i]);var y=(0,u.Z)((0,u.Z)({},e),{},{control:o,trigger:l,errors:c});return(0,p.jsxs)(t.Fragment,{children:[(null===e||void 0===e?void 0:e.title)&&(0,p.jsx)("div",{style:{marginBottom:15},children:(0,p.jsx)("h5",{children:e.title})}),(0,p.jsx)(h,(0,u.Z)({},y))]})}var x=t.forwardRef(g),b=(0,t.forwardRef)((function(e,r){var n=e.name,t=e.onChange,i=e.onBlur;return(0,p.jsx)(a.JX,{children:(0,p.jsx)(a.XZ,{value:"checkbox",name:n,onChange:t,onBlur:i})})})),y=function(e){e.updateData;var r=(0,t.useRef)(),n=(0,i.I0)(),a=(0,i.v9)((function(e){return e})).demo,o=a.drawerVisible,c=a.tableType,f=a.queryInfo;return(0,p.jsx)(l.PB,{width:800,title:"add"===c?"\u65b0\u589e":"edit"===c?"\u7f16\u8f91":"\u67e5\u770b",visible:o,onClose:function(){return n({type:"demo/clean"})},buttons:[{label:"\u4fdd\u5b58",onPress:function(){var e=(0,s.Z)(d().mark((function e(){var n,t,a,i,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===r||void 0===r||null===(n=r.current)||void 0===n?void 0:n.trigger();case 2:return e.next=4,null===r||void 0===r||null===(t=r.current)||void 0===t?void 0:t.errors();case 4:return i=e.sent,e.next=7,null===r||void 0===r||null===(a=r.current)||void 0===a?void 0:a.getValues();case 7:if(l=e.sent,console.log("errors",i,"values",l),!i){e.next=11;break}return e.abrupt("return");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}],children:(0,p.jsx)(x,{ref:r,title:"\u6d4b\u8bd5QuickForm",onItemChange:function(){var e=(0,s.Z)(d().mark((function e(r,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",console.log("name",r,"value",n));case 1:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),formDatas:[{type:"input",name:"firstName",label:"\u59d3\u6c0f",initValue:null===f||void 0===f?void 0:f.firstName,attributes:{placeholder:"\u8bf7\u8f93\u5165\u59d3\u6c0f"},rules:{required:"\u8bf7\u8f93\u5165\u59d3\u6c0f"}},{type:"input",name:"lastName",label:"\u540d\u5b57",initValue:null===f||void 0===f?void 0:f.lastName,attributes:{placeholder:"\u8bf7\u8f93\u5165\u540d\u5b57"},rules:{required:"\u8bf7\u8f93\u5165\u540d\u5b57"}},{type:"select",name:"select",label:"\u5e74\u9f84",initValue:null===f||void 0===f?void 0:f.select,options:[{value:1,label:"\u82f9\u679c"},{value:2,label:"\u897f\u74dc"},{value:3,label:"\u9999\u8549"},{value:4,label:"\u4e1c\u5317\u5927\u51bb\u68a8"}],attributes:{placeholder:"\u8bf7\u9009\u62e9\u6c34\u679c"}},{type:"render",label:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6",name:"id1",rules:{required:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6"},render:function(e){return(0,p.jsx)(b,(0,u.Z)({},e))}}]})})},j=void 0,k=function(){var e=(0,i.I0)(),r=function(r){e({type:"demo/updateState",payload:r})},n=(0,l.x6)(o.Zp,{formatData:function(e){return{total:e.data.total,data:e.data.rows||[]}},query:function(e){return console.log(e),{page:e,pageSize:10}}});function u(n,t){r({isView:"view"===n,tableType:n}),"add"===n&&r({drawerVisible:!0,queryInfo:{}}),"edit"!==n&&"view"!==n||e({type:"demo/selectById",payload:{id:null===t||void 0===t?void 0:t.id}})}return(0,p.jsxs)(t.Fragment,{children:[(0,p.jsx)(l.QV,{btns:[{label:"\u65b0\u589e",type:"primary",onClick:u.bind(j,"add")},{label:"\u5bfc\u51fa",type:"danger",onClick:u.bind(j,"export")},{label:"\u5bfc\u5165",type:"dark",onClick:u.bind(j,"import")}],columns:[{title:"\u59d3\u540d",key:"name",props:{widget:"input",initialValue:"zzz",widgetProps:{preIcon:"user",placeholder:"\u8f93\u5165\u7528\u6237\u540d"}}},{title:"\u5e74\u9f84",key:"age",props:{widget:"select",option:[{label:"20",value:20},{label:"10",value:10}]}},{title:"\u5730\u5740",key:"info"},{title:"\u64cd\u4f5c",key:"edit",width:98,render:function(e,r,n){return(0,p.jsxs)("div",{children:[(0,p.jsx)(a.zx,{size:"small",type:"danger",onClick:u.bind(j,"edit",n),children:"\u7f16\u8f91"}),(0,p.jsx)(a.zx,{size:"small",type:"success",onClick:u.bind(j,"view",n),children:"\u67e5\u770b"})]})}}],table:n}),(0,p.jsx)(y,{updateData:r})]})}},523:function(e,r,n){n.d(r,{ZE:function(){return i},Zp:function(){return l}});var t=n(3028),a=n(5228);function i(e){return(0,a.W)("/api/demo/selectById",{method:"POST",body:(0,t.Z)({},e)})}var l="/api/demo/selectPage"},1965:function(e,r,n){n.d(r,{PB:function(){return P},QV:function(){return S},x6:function(){return V}});var t=n(7896),a=n(6976),i=n(9372),l=n(4218),o=function(e){var r=e.children,n=e.loading,t=void 0!==n&&n;return(0,l.jsx)(i.aN,{loading:t,style:{display:"block"},bgColor:"rgba(255, 255, 255, 0.4)",children:(0,l.jsx)(l.Fragment,{children:r})})},u=n(2867),s=n(7162),c=n.n(s),d=n(4795),f=n(5642),p=n(5228),v=(0,a.createContext)({}),h=function(){return(0,a.useContext)(v)},m=function(e){e.style;var r=e.columns,n=(0,a.useState)(1),t=(0,u.Z)(n,2),o=t[0],s=t[1],v=(0,a.useState)({data:[],total:0}),m=(0,u.Z)(v,2),g=m[0],x=m[1],b=h(),y=b.formatData,j=b.updateStore,k=b.query,w=b.key,Z=b.searchValues,S=(0,a.useMemo)((function(){var e={};return r.forEach((function(r){var n;if(null!=r&&null!=(n=r.props)&&n.initialValue){var t=r.key||r.props.key;e[t]=r.props.initialValue}})),e}),[JSON.stringify(r)]),V=(0,a.useRef)(!1),C=(0,a.useCallback)((function(){return k?k(o,!1===V.current?S:Z):{page:1,pageSize:10}}),[o,JSON.stringify(S),JSON.stringify(Z)]),O=C().pageSize||10,P=(0,f.ZP)([w,{method:"POST",body:C()}],p.W,{revalidateOnFocus:!1}),I=P.data,z=P.isValidating,N=(0,a.useCallback)((0,d.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(1);case 1:case"end":return e.stop()}}),e)}))),[]),E=(0,a.useCallback)((function(e){s(e)}),[]);return(0,a.useEffect)((function(){var e={};r.forEach((function(r){var n;if(null!=r&&null!=(n=r.props)&&n.initialValue){var t=r.key||r.props.key;e[t]=r.props.initialValue}}));var n={data:null==I?void 0:I.data,total:null==I?void 0:I.total,loading:!I||z,onSearch:N};V.current||(V.current=!0,n.searchValues=e),j(n),I&&x(I)}),[JSON.stringify(I),z,N,JSON.stringify(r)]),(0,l.jsx)(i.iA,{columns:r,data:y&&I?y(I).data:(null==I?void 0:I.data)||(null==g?void 0:g.data),footer:(0,l.jsx)(i.tl,{current:o,pageSize:O,total:y&&I?y(I).total:(null==I?void 0:I.total)||(null==g?void 0:g.total),divider:!0,onChange:function(e){E(e)}})})},g=n(1461),x=["option"],b=function(e){var r=e.option,n=(0,g.Z)(e,x);return(0,l.jsxs)(i.Ph,(0,t.Z)({},n,{children:[(0,l.jsx)(i.Ph.Option,{value:"",children:"\u8bf7\u9009\u62e9"}),r&&r.map((function(e){return(0,l.jsx)(i.Ph.Option,{value:e.value,children:e.label},e.value)}))]}))},y=["option"],j=function(e){var r=e.option,n=(0,g.Z)(e,y);return(0,l.jsx)(i.Ee,(0,t.Z)({},n,{children:r&&r.map((function(e){return(0,l.jsx)(i.Y8,{value:e.value,children:e.label},e.value)}))}))},k=["widgetProps","key","widget","label","initialValue"],w={input:i.II,radio:j,checkbox:i.XZ,switch:i.rs,select:b,searchSelect:i.ul,textarea:i.gx,dateInput:i.Wr,timePicker:i.jI,monthPicker:i.lH},Z=function(e){var r=h(),n=r.updateStore,o=(r.reset,r.onSearch),u=e.columns,s=function(){var e={};return u.forEach((function(r){if(r.props&&Object.keys(r.props).length>0){var n=r.props,a=n.widgetProps,i=n.key,o=n.widget,u=n.label,s=n.initialValue,c=(0,g.Z)(n,k),d=r.key||i,f=w[o];e[d]=(0,t.Z)({label:r.title||u,children:(0,l.jsx)(f,(0,t.Z)({},a))},c,{initialValue:s})}})),e};(0,a.useEffect)((function(){n({searchValues:(0,t.Z)({},s().defaultValues)})}),[JSON.stringify(s().defaultValues)]);return(0,l.jsx)(i.l0,{style:{background:"#fff",paddingBottom:5},resetOnSubmit:!1,onSubmit:function(e){!function(e){var r=e.initial,a=e.current;n({searchValues:(0,t.Z)({},r,a)}),o(a)}({initial:e.initial,current:e.current})},onSubmitError:function(e){return e.filed?(0,t.Z)({},e.filed):null},fields:s(),children:function(e){var r=e.fields;e.state,e.canSubmit,e.resetForm;return(0,l.jsx)("div",{children:(0,l.jsxs)(i.X2,{gutter:12,children:[Object.keys(r).map((function(e){return(0,l.jsx)(i.JX,{fixed:!0,style:{width:"20%"},children:r[e]},e)})),(0,l.jsx)(i.JX,{style:{marginTop:31},children:(0,l.jsx)(i.zx,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"})})]})})}})},S=function(e){var r=e.table,n=e.columns,u=e.btns,s=void 0===u?[]:u,c=r.key,d=r.data,f=r.reset,p=r.refersh,h=r.updateStore,g=r.formatData,x=r.query,b=r.searchValues,y=r.loading,j=r.onSearch,k=(0,a.useMemo)((function(){return{data:[],reset:f,refersh:p,key:c,updateStore:h,formatData:g,query:x,searchValues:b,onSearch:j}}),[JSON.stringify(d),f,p,c,h,g,x,JSON.stringify(b),j]);return console.log("loading---\x3e",y),(0,l.jsx)(v.Provider,{value:k,children:(0,l.jsxs)(o,{loading:y,children:[(0,l.jsx)(Z,{columns:n}),s.length>0&&(0,l.jsx)("div",{style:{marginTop:14,background:"#fff",padding:10},children:s.map((function(e,r){return(0,l.jsx)(i.zx,(0,t.Z)({style:{marginRight:5}},e,{children:e.label}),r.toString())}))}),(0,l.jsx)(m,{columns:n})]})})},V=function(e,r){void 0===r&&(r={});var n=r,i=n.formatData,l=n.query,o=(0,a.useState)({total:1,data:[],selectChecked:[],selectCheckedRows:[],searchValues:{},loading:!1}),s=(0,u.Z)(o,2),c=s[0],d=s[1];return(0,t.Z)({key:e,reset:function(){},refersh:function(){},onSearch:function(){},formatData:i,query:l,updateStore:function(e){d((0,t.Z)({},c,e))}},c)},C=["visible","title","onClose","width","buttons","children"];function O(e){var r=e.visible,n=e.title,a=void 0===n?"":n,o=e.onClose,u=void 0===o?null:o,s=e.width,c=void 0===s?800:s,d=e.buttons,f=void 0===d?[]:d,p=e.children,v=(0,g.Z)(e,C);return(0,l.jsx)(i.dy,(0,t.Z)({title:a,isOpen:r,onClose:u&&u,size:c,bodyStyle:{padding:"0 10px 45px 10px"}},v,{footer:f.map((function(e,r){var n=e.label,t=void 0===n?"":n,a=e.onPress,o=e.show,u=void 0===o||o,s=e.loading,c=e.type,d=void 0===c?"primary":c,f=e.width,p=void 0===f?60:f,v=e.size,h=void 0===v?"default":v;return u&&(0,l.jsx)(i.zx,{style:{width:p},type:d,size:h,onClick:a&&a,loading:s,children:t},r)})),children:p}))}var P=(0,a.memo)(O)}}]);
//# sourceMappingURL=655.js.map