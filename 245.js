"use strict";(self.webpackChunk_examples_base=self.webpackChunk_examples_base||[]).push([[245],{3245:function(e,t,n){n.d(t,{PB:function(){return V},A9:function(){return F},QV:function(){return w},x6:function(){return O}});var i=n(7896),r=n(6976),a=n(9372),l=n(4218),o=function(e){var t=e.children,n=e.loading,i=void 0!==n&&n;return(0,l.jsx)(a.aN,{loading:i,style:{display:"block"},bgColor:"rgba(255, 255, 255, 0.4)",children:(0,l.jsx)(l.Fragment,{children:t})})},u=n(2867),s=n(7162),c=n.n(s),d=n(4795),f=n(5642),h=n(5228),v=(0,r.createContext)({}),p=function(){return(0,r.useContext)(v)},m=function(e){e.style;var t=e.columns,n=(0,r.useState)(1),i=(0,u.Z)(n,2),o=i[0],s=i[1],v=(0,r.useState)({data:[],total:0}),m=(0,u.Z)(v,2),x=m[0],g=m[1],y=p(),b=y.formatData,j=y.updateStore,k=y.query,S=y.key,Z=y.searchValues,w=(0,r.useMemo)((function(){var e={};return t.forEach((function(t){var n;if(null!=t&&null!=(n=t.props)&&n.initialValue){var i=t.key||t.props.key;e[i]=t.props.initialValue}})),e}),[JSON.stringify(t)]),O=(0,r.useRef)(!1),C=(0,r.useCallback)((function(){return k?k(o,!1===O.current?w:Z):{page:1,pageSize:10}}),[o,JSON.stringify(w),JSON.stringify(Z)]),P=C().pageSize||10,V=(0,f.ZP)([S,{method:"POST",body:C()}],h.W,{revalidateOnFocus:!1}),z=V.data,J=V.isValidating,N=(0,r.useCallback)((0,d.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(1);case 1:case"end":return e.stop()}}),e)}))),[]),F=(0,r.useCallback)((function(e){s(e)}),[]);return(0,r.useEffect)((function(){var e={};t.forEach((function(t){var n;if(null!=t&&null!=(n=t.props)&&n.initialValue){var i=t.key||t.props.key;e[i]=t.props.initialValue}}));var n={data:null==z?void 0:z.data,total:null==z?void 0:z.total,loading:!z||J,onSearch:N};O.current||(O.current=!0,n.searchValues=e),j(n),z&&g(z)}),[JSON.stringify(z),J,N,JSON.stringify(t)]),(0,l.jsx)(a.iA,{columns:t,data:b&&z?b(z).data:(null==z?void 0:z.data)||(null==x?void 0:x.data),footer:(0,l.jsx)(a.tl,{current:o,pageSize:P,total:b&&z?b(z).total:(null==z?void 0:z.total)||(null==x?void 0:x.total),divider:!0,onChange:function(e){F(e)}})})},x=n(1461),g=["option"],y=function(e){var t=e.option,n=(0,x.Z)(e,g);return(0,l.jsxs)(a.Ph,(0,i.Z)({},n,{children:[(0,l.jsx)(a.Ph.Option,{value:"",children:"\u8bf7\u9009\u62e9"}),t&&t.map((function(e){return(0,l.jsx)(a.Ph.Option,{value:e.value,children:e.label},e.value)}))]}))},b=["option"],j=function(e){var t=e.option,n=(0,x.Z)(e,b);return(0,l.jsx)(a.Ee,(0,i.Z)({},n,{children:t&&t.map((function(e){return(0,l.jsx)(a.Y8,{value:e.value,children:e.label},e.value)}))}))},k=["widgetProps","key","widget","label","initialValue"],S={input:a.II,radio:j,checkbox:a.XZ,switch:a.rs,select:y,searchSelect:a.ul,textarea:a.gx,dateInput:a.Wr,timePicker:a.jI,monthPicker:a.lH},Z=function(e){var t=p(),n=t.updateStore,o=(t.reset,t.onSearch),u=e.columns,s=(0,r.useMemo)((function(){var e={};return u.forEach((function(t){if(t.props&&Object.keys(t.props).length>0){var n=t.props,r=n.widgetProps,a=n.key,o=n.widget,u=n.label,s=n.initialValue,c=(0,x.Z)(n,k),d=a||t.key,f=S[o];e[d]=(0,i.Z)({label:u||t.title,children:(0,l.jsx)(f,(0,i.Z)({},r))},c,{initialValue:s})}})),e}),[JSON.stringify(u)]),c=4-Object.keys(s).length%5;return(0,l.jsx)(a.l0,{style:{background:"#fff",paddingBottom:10,marginBottom:14},resetOnSubmit:!1,onSubmit:function(e){!function(e){var t=e.initial,r=e.current;n({searchValues:(0,i.Z)({},t,r)}),o(r)}({initial:e.initial,current:e.current})},onSubmitError:function(e){return e.filed?(0,i.Z)({},e.filed):null},fields:s,children:function(e){var t=e.fields;e.state,e.canSubmit,e.resetForm;return(0,l.jsx)("div",{children:(0,l.jsxs)(a.X2,{gutter:12,children:[Object.keys(t).map((function(e){return(0,l.jsx)(a.JX,{fixed:!0,style:{width:"20%"},children:t[e]},e)})),Array(c).fill("").map((function(e,t){return(0,l.jsx)(a.JX,{fixed:!0,style:{width:"20%"}},t)})),(0,l.jsx)(a.JX,{align:"middle",children:(0,l.jsx)(a.zx,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"})})]})})}})},w=function(e){var t=e.table,n=e.columns,u=e.btns,s=void 0===u?[]:u,c=t.key,d=t.data,f=t.reset,h=t.refersh,p=t.updateStore,x=t.formatData,g=t.query,y=t.searchValues,b=t.loading,j=t.onSearch,k=(0,r.useMemo)((function(){return{data:[],reset:f,refersh:h,key:c,updateStore:p,formatData:x,query:g,searchValues:y,onSearch:j}}),[JSON.stringify(d),f,h,c,p,x,g,JSON.stringify(y),j]);return(0,l.jsx)(v.Provider,{value:k,children:(0,l.jsxs)(o,{loading:b,children:[(0,l.jsx)(Z,{columns:n}),s.length>0&&(0,l.jsx)("div",{style:{background:"#fff",padding:10},children:s.map((function(e,t){return(0,l.jsx)(a.zx,(0,i.Z)({style:{marginRight:5}},e,{children:e.label}),t.toString())}))}),(0,l.jsx)(m,{columns:n})]})})},O=function(e,t){void 0===t&&(t={});var n=t,a=n.formatData,l=n.query,o=(0,r.useState)({total:1,data:[],selectChecked:[],selectCheckedRows:[],searchValues:{},loading:!1}),s=(0,u.Z)(o,2),c=s[0],d=s[1];return(0,i.Z)({key:e,reset:function(){},refersh:function(){},onSearch:function(){},formatData:a,query:l,updateStore:function(e){d((0,i.Z)({},c,e))}},c)},C=["visible","title","onClose","width","buttons","children"];function P(e){var t=e.visible,n=e.title,r=void 0===n?"":n,o=e.onClose,u=void 0===o?null:o,s=e.width,c=void 0===s?800:s,d=e.buttons,f=void 0===d?[]:d,h=e.children,v=(0,x.Z)(e,C);return(0,l.jsx)(a.dy,(0,i.Z)({title:r,isOpen:t,onClose:u&&u,size:c,bodyStyle:{padding:"0 10px 45px 10px"}},v,{footer:f.map((function(e,t){var n=e.label,i=void 0===n?"":n,r=e.onPress,o=e.show,u=void 0===o||o,s=e.loading,c=e.type,d=void 0===c?"primary":c,f=e.width,h=void 0===f?80:f,v=e.size,p=void 0===v?"default":v;return u&&(0,l.jsx)(a.zx,{style:{width:h},type:d,size:p,onClick:r&&r,loading:s,children:i},t)})),children:h}))}var V=(0,r.memo)(P);var z=function(e){var t=e.getFormFields,n=e.onSubmit,o=e.onChange,u=e.onSubmitError,s=e.btns,c=void 0===s?[]:s,d=e.span,f=void 0===d?3:d;return(0,l.jsx)(a.l0,{style:{background:"#fff",paddingBottom:10,marginBottom:14},resetOnSubmit:!1,onSubmit:function(e){var t=e.initial,i=e.current;return null==n?void 0:n(t,i)},onChange:function(e){var t=e.initial,n=e.current;return null==o?void 0:o(t,n)},onSubmitError:function(e){if(!u)return e.filed?(0,i.Z)({},e.filed):null;u(e)},fields:t,children:function(e){var t=e.fields,n=(e.state,e.canSubmit);e.resetForm;return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)("div",{className:"w-form-grid",style:{gridTemplateColumns:"repeat("+f+", 1fr)"},children:Object.keys(t).map((function(e){return(0,l.jsx)("div",{style:{flex:1},children:t[e]},e)}))}),(0,l.jsx)("div",{className:"w-form-item-center",children:c.map((function(e,t){var r=e.label,o=e.btnType,u=e.onPress,s=e.show,c=void 0===s||s,d=e.size,f=e.type,h=void 0===f?"primary":f,v=e.loading,p=e.width,m={loading:v,style:{width:void 0===p?80:p},type:h,size:d};return c?"submit"===o?(0,l.jsx)(a.zx,(0,i.Z)({},m,{disabled:!n(),htmlType:"submit",children:r}),t):"reset"===o?(0,l.jsx)(a.zx,(0,i.Z)({},m,{onClick:function(){null==u||u()},children:r}),t):(0,l.jsx)(a.zx,(0,i.Z)({},m,{onClick:function(){return null==u?void 0:u()},children:r}),t):null}))})]})}})},J=["widgetProps","key","widget","label","initialValue"],N={input:a.II,radio:j,checkbox:a.XZ,switch:a.rs,select:y,searchSelect:a.ul,textarea:a.gx,dateInput:a.Wr,timePicker:a.jI,monthPicker:a.lH};var F=function(e){var t=e.formDatas,n=void 0===t?[]:t,o=e.title,u=void 0===o?"":o,s=e.formType,c=void 0===s?"card":s,d=(0,r.useMemo)((function(){var e={};return n.forEach((function(t){if(t){var n=t.widgetProps,r=t.key,a=t.widget,o=t.label,u=t.initialValue,s=(0,x.Z)(t,J),c=N[a];e[r]=(0,i.Z)({label:o,children:(0,l.jsx)(c,(0,i.Z)({},n))},s,{initialValue:u})}})),e}),[n]),f=(0,r.useMemo)((function(){var t=(0,i.Z)({},e,{getFormFields:d});return"collapse"===c?(0,l.jsx)(a.UO,{activeKey:["1"],children:(0,l.jsx)(a.UO.Panel,{header:u,children:(0,l.jsx)(z,(0,i.Z)({},t))},"1")}):"card"===c?(0,l.jsx)(a.Zb,{title:u,children:(0,l.jsx)(z,(0,i.Z)({},t))}):(0,l.jsxs)(r.Fragment,{children:[u&&(0,l.jsx)("h3",{children:u}),(0,l.jsx)(z,(0,i.Z)({},t))]})}),[c,n,u]);return(0,l.jsx)("div",{style:{flex:1},children:f})}}}]);
//# sourceMappingURL=245.js.map