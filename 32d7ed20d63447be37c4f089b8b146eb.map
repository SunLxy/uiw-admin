{"version":3,"sources":["layouts/BasicLayout.js"],"names":["CustomRouter","props","menus","navData","reduce","arr","current","concat","children","state","location","breadcrumbNameMap","getBreadcrumbNameMap","renderBreadcrumb","getRouteData","routeData","firstMenuData","menuData","getMenuData","forEach","item","path","name","data","parentPath","push","menusData","map","index","itemPath","indexOf","replace","length","some","child","icon","getNavMenuItems","test","target","pathname","router","pathSnippets","split","filter","i","extraBreadcrumbItems","url","slice","join","component","breadcrumb","wapper","sider","logo","onClose","bind","onSelect","content","header","headerLeft","headerRight","exact","childContextTypes","object","node"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;;;AACA;;;;AACA;;;;AACA;;AAEA;;;;;;;;;;;;IAEqBA;;;AACnB,wBAAYC,KAAZ,EAAmB;AAAA;;AAEjB;AAFiB,4HACXA,KADW;;AAGjB,UAAKC,KAAL,GAAaD,MAAME,OAAN,CAAcC,MAAd,CAAqB,UAACC,GAAD,EAAMC,OAAN;AAAA,aAAkBD,IAAIE,MAAJ,CAAWD,QAAQE,QAAnB,CAAlB;AAAA,KAArB,EAAqE,EAArE,CAAb;AACA,UAAKC,KAAL,GAAa,EAAb;AAJiB;AAKlB;;;;sCACiB;AAAA,UACRC,QADQ,GACK,KAAKT,KADV,CACRS,QADQ;;AAEhB,aAAO;AACLA,0BADK;AAELC,2BAAmB,KAAKC,oBAAL,EAFd;AAGLC,0BAAkB,KAAKA,gBAAL;AAHb,OAAP;AAKD;;;2CACsB;AAAA,mBACa,KAAKZ,KADlB;AAAA,UACbE,OADa,UACbA,OADa;AAAA,UACJW,YADI,UACJA,YADI;;AAErB,UAAMC,YAAYD,aAAa,aAAb,CAAlB;AACA,UAAME,gBAAgBb,QAAQC,MAAR,CAAe,UAACC,GAAD,EAAMC,OAAN;AAAA,eAAkBD,IAAIE,MAAJ,CAAWD,QAAQE,QAAnB,CAAlB;AAAA,OAAf,EAA+D,EAA/D,CAAtB;AACA,UAAMS,WAAW,KAAKC,WAAL,CAAiBF,aAAjB,EAAgC,EAAhC,CAAjB;AACA,UAAML,oBAAoB,EAA1B;AACAI,gBAAUR,MAAV,CAAiBU,QAAjB,EAA2BE,OAA3B,CAAmC,UAACC,IAAD,EAAU;AAC3CT,0BAAkBS,KAAKC,IAAvB,IAA+BD,KAAKE,IAApC;AACD,OAFD;AAGA,aAAOX,iBAAP;AACD;;;gCACWY,MAAMC,YAAY;AAAA;;AAC5B,UAAInB,MAAM,EAAV;AACAkB,WAAKJ,OAAL,CAAa,UAACC,IAAD,EAAU;AACrB,YAAIA,KAAKZ,QAAT,EAAmB;AACjBH,cAAIoB,IAAJ,CAAS,EAAEJ,MAASG,UAAT,SAAuBJ,KAAKC,IAA9B,EAAsCC,MAAMF,KAAKE,IAAjD,EAAT;AACAjB,gBAAMA,IAAIE,MAAJ,CAAW,OAAKW,WAAL,CAAiBE,KAAKZ,QAAtB,EAAmCgB,UAAnC,SAAiDJ,KAAKC,IAAtD,CAAX,CAAN;AACD;AACF,OALD;AAMA,aAAOhB,GAAP;AACD;;;oCACeqB,WAA4B;AAAA;;AAAA,UAAjBF,UAAiB,uEAAJ,EAAI;;AAC1C,UAAI,CAACE,SAAL,EAAgB;AACd,eAAO,EAAP;AACD;AACD,aAAOA,UAAUC,GAAV,CAAc,UAACP,IAAD,EAAOQ,KAAP,EAAiB;AACpC,YAAI,CAACR,KAAKE,IAAV,EAAgB;AACd,iBAAO,IAAP;AACD;AACD,YAAIO,iBAAJ;AACA,YAAIT,KAAKC,IAAL,CAAUS,OAAV,CAAkB,MAAlB,MAA8B,CAAlC,EAAqC;AACnCD,qBAAWT,KAAKC,IAAhB;AACD,SAFD,MAEO;AACLQ,qBAAW,CAAGL,UAAH,UAAiBJ,KAAKC,IAAL,IAAa,EAA9B,GAAmCU,OAAnC,CAA2C,MAA3C,EAAmD,GAAnD,CAAX;AACD;AACD,YAAIX,KAAKZ,QAAL,IAAiBY,KAAKZ,QAAL,CAAcwB,MAA/B,IAAyCZ,KAAKZ,QAAL,CAAcyB,IAAd,CAAmB;AAAA,iBAASC,MAAMZ,IAAf;AAAA,SAAnB,CAA7C,EAAsF;AACpF,iBACE;AAAA,sBAAM,OAAN;AAAA;AACE,qBAAOO,QADT;AAEE,qBAAOT,KAAKe,IAAL,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,2DAAM,MAAMf,KAAKe,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAP;AAAA;AAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAOf,uBAAKE;AAAZ,iBAAjC;AAAA;AAAA,eAAb,GAAkFF,KAAKE,IAFhG;AAGE,mBAAKO,QAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKG,mBAAKO,eAAL,CAAqBhB,KAAKZ,QAA1B,EAAoCqB,QAApC;AALH,WADF;AASD;AACD,YAAMM,OAAOf,KAAKe,IAAL,IAAa,2CAAM,MAAMf,KAAKe,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA,UAA1B;AACA,eACE;AAAA,oBAAM,IAAN;AAAA,YAAW,KAAKN,QAAhB,EAA0B,OAAOA,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAEI,yBAAeQ,IAAf,CAAoBR,QAApB,IAAiC;AAAA;AAAA,cAAG,MAAMA,QAAT,EAAmB,QAAQT,KAAKkB,MAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0CH,gBAA1C;AAA+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAOf,mBAAKE;AAAZ,aAA/C;AAAA;AAAA,WAAjC,GACE;AAAA;AAAA,cAAM,IAAIO,QAAV,EAAoB,QAAQT,KAAKkB,MAAjC,EAAyC,SAAST,aAAa,OAAK5B,KAAL,CAAWS,QAAX,CAAoB6B,QAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AACGJ,gBADH;AACQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAOf,mBAAKE;AAAZ;AADR;AAHN,SADF;AAYD,OAlCM,CAAP;AAmCD;;;8BACS,CAAG;;;+BACF,CAAG;;;uCACK;AAAA;;AAAA,oBACgC,KAAKrB,KADrC;AAAA,UACGsC,QADH,WACT7B,QADS,CACG6B,QADH;AAAA,UACezB,YADf,WACeA,YADf;;AAEjB,UAAMH,oBAAoB,KAAKC,oBAAL,EAA1B;AACA,UAAM4B,SAAS1B,aAAa,aAAb,CAAf;AACA,UAAM2B,eAAeF,SAASG,KAAT,CAAe,GAAf,EAAoBC,MAApB,CAA2B;AAAA,eAAKC,CAAL;AAAA,OAA3B,CAArB;AACA,UAAMC,uBAAuBJ,aAAad,GAAb,CAAiB,UAACP,IAAD,EAAOQ,KAAP,EAAiB;AAC7D,YAAMkB,YAAUL,aAAaM,KAAb,CAAmB,CAAnB,EAAsBnB,QAAQ,CAA9B,EAAiCoB,IAAjC,CAAsC,GAAtC,CAAhB;AACA,YAAMC,YAAYT,OAAOG,MAAP,CAAc;AAAA,iBAAQvB,KAAKC,IAAL,KAAcyB,GAAtB;AAAA,SAAd,CAAlB;AACA,eACE;AAAA,0BAAY,IAAZ;AAAA,YAAiB,KAAKA,GAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AACGA,kBAAQP,QAAR,IAAoBU,UAAUjB,MAAV,KAAqB,CAAzC,GAA6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAOrB,8BAAkBmC,GAAlB;AAAP,WAA7C,GACC;AAAA;AAAA,cAAM,IAAIA,GAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgBnC,8BAAkBmC,GAAlB;AAAhB;AAFJ,SADF;AAOD,OAV4B,CAA7B;AAWA,aACE;AAAA;AAAA,UAAY,WAAW,sBAAOI,UAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AACE;AAAA,0BAAY,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACGL,+BAAqBb,MAArB,GAA8B,CAA9B,GAAkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAlC,GAAoD;AAAA;AAAA,cAAM,IAAG,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADvD,SADF;AAIGa;AAJH,OADF;AAQD;;;6BACQ;AAAA;;AAAA,UACC/B,YADD,GACkB,KAAKb,KADvB,CACCa,YADD;;AAEP,aACE;AAAA;AAAA,UAAK,WAAW,sBAAOqC,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AACE;AAAA;AAAA,YAAK,WAAW,sBAAOC,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AACE;AAAA;AAAA,cAAK,WAAW,sBAAOC,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AACE;AAAA;AAAA,gBAAM,IAAG,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AACE;AAAA;AAAA,kBAAK,SAAQ,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,wDAAM,GAAE,ySAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,eADF;AAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJF;AADF,WADF;AASE;AAAA;AAAA,cAAM,SAAS,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAAf,EAAwC,UAAU,KAAKC,QAAL,CAAcD,IAAd,CAAmB,IAAnB,CAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AACG,iBAAKnB,eAAL,CAAqB,KAAKlC,KAA1B;AADH;AATF,SADF;AAcE;AAAA;AAAA,YAAK,WAAW,sBAAOuD,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AACE;AAAA;AAAA,cAAK,WAAW,sBAAOC,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AACE;AAAA;AAAA,gBAAK,WAAW,sBAAOC,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AACE;AAAA;AAAA,kBAAG,QAAO,QAAV,EAAmB,MAAK,wCAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,2DAAM,MAAK,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AADF,aADF;AAME;AAAA;AAAA,gBAAK,WAAW,sBAAOC,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AACE;AAAA;AAAA,kBAAK,WAAW,sBAAOxC,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,2DAAM,MAAK,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,eADF;AAIE;AAAA;AAAA,kBAAK,WAAW,sBAAOA,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AACE;AAAA;AAAA,oBAAO,SAAP,EAAW,OAAO,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,6DAAM,MAAK,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AADF;AAJF;AANF,WADF;AAkBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACGN,yBAAa,aAAb,EAA4Ba,GAA5B,CAAgC,UAACP,IAAD,EAAOQ,KAAP,EAAiB;AAChD,qBACE,uDAAO,OAAOR,KAAKyC,KAAnB,EAA0B,KAAKzC,KAAKC,IAApC,EAA0C,MAAMD,KAAKC,IAArD,EAA2D,WAAWD,KAAK6B,SAA3E;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF;AAGD,aAJA,CADH;AAME,mEAAO,qBAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AANF;AAlBF;AAdF,OADF;AA4CD;;;;;;kBArJkBjD;;;AAwJrBA,aAAa8D,iBAAb,GAAiC;AAC/BpD,YAAU,oBAAUqD,MADW;AAE/BpD,qBAAmB,oBAAUoD,MAFE;AAG/BlD,oBAAkB,oBAAUmD;AAHG,CAAjC","file":"32d7ed20d63447be37c4f089b8b146eb.map","sourcesContent":["import { HashRouter, Route, Switch, BrowserRouter as Router, Redirect, withRouter, Link } from 'react-router-dom';\nimport React, { Component, createElement } from 'react';\nimport PropTypes from 'prop-types';\nimport NotFound from '../routes/Exception/404';\nimport { Menu, Icon, Breadcrumb, Badge } from 'uiw';\n\nimport styles from './BasicLayout.less';\n\nexport default class CustomRouter extends Component {\n  constructor(props) {\n    super(props);\n    // 把一级 Layout 的 children 作为菜单项\n    this.menus = props.navData.reduce((arr, current) => arr.concat(current.children), []);\n    this.state = {};\n  }\n  getChildContext() {\n    const { location } = this.props;\n    return {\n      location,\n      breadcrumbNameMap: this.getBreadcrumbNameMap(),\n      renderBreadcrumb: this.renderBreadcrumb(),\n    };\n  }\n  getBreadcrumbNameMap() {\n    const { navData, getRouteData } = this.props;\n    const routeData = getRouteData('BasicLayout');\n    const firstMenuData = navData.reduce((arr, current) => arr.concat(current.children), []);\n    const menuData = this.getMenuData(firstMenuData, '');\n    const breadcrumbNameMap = {};\n    routeData.concat(menuData).forEach((item) => {\n      breadcrumbNameMap[item.path] = item.name;\n    });\n    return breadcrumbNameMap;\n  }\n  getMenuData(data, parentPath) {\n    let arr = [];\n    data.forEach((item) => {\n      if (item.children) {\n        arr.push({ path: `${parentPath}/${item.path}`, name: item.name });\n        arr = arr.concat(this.getMenuData(item.children, `${parentPath}/${item.path}`));\n      }\n    });\n    return arr;\n  }\n  getNavMenuItems(menusData, parentPath = '') {\n    if (!menusData) {\n      return [];\n    }\n    return menusData.map((item, index) => {\n      if (!item.name) {\n        return null;\n      }\n      let itemPath;\n      if (item.path.indexOf('http') === 0) {\n        itemPath = item.path;\n      } else {\n        itemPath = `${parentPath}/${item.path || ''}`.replace(/\\/+/g, '/');\n      }\n      if (item.children && item.children.length && item.children.some(child => child.name)) {\n        return (\n          <Menu.SubMenu\n            index={itemPath}\n            title={item.icon ? (<span> <Icon type={item.icon} /> <span>{item.name}</span> </span>) : item.name}\n            key={itemPath}\n          >\n            {this.getNavMenuItems(item.children, itemPath)}\n          </Menu.SubMenu>\n        );\n      }\n      const icon = item.icon && <Icon type={item.icon} />;\n      return (\n        <Menu.Item key={itemPath} index={itemPath}>\n          {\n            /^https?:\\/\\//.test(itemPath) ? (<a href={itemPath} target={item.target}> {icon}<span>{item.name}</span> </a>) : (\n              <Link to={itemPath} target={item.target} replace={itemPath === this.props.location.pathname}>\n                {icon}<span>{item.name}</span>\n              </Link>\n            )\n          }\n        </Menu.Item>\n      );\n\n    })\n  }\n  onClose() { }\n  onSelect() { }\n  renderBreadcrumb() {\n    const { location: { pathname }, getRouteData } = this.props;\n    const breadcrumbNameMap = this.getBreadcrumbNameMap();\n    const router = getRouteData('BasicLayout');\n    const pathSnippets = pathname.split('/').filter(i => i);\n    const extraBreadcrumbItems = pathSnippets.map((item, index) => {\n      const url = `/${pathSnippets.slice(0, index + 1).join('/')}`;\n      const component = router.filter(item => item.path === url);\n      return (\n        <Breadcrumb.Item key={url}>\n          {url === pathname || component.length === 0 ? <span>{breadcrumbNameMap[url]}</span> : (\n            <Link to={url}>{breadcrumbNameMap[url]}</Link>\n          )}\n        </Breadcrumb.Item>\n      )\n    })\n    return (\n      <Breadcrumb className={styles.breadcrumb}>\n        <Breadcrumb.Item>\n          {extraBreadcrumbItems.length < 1 ? <span>首页</span> : <Link to='/'>首页</Link>}\n        </Breadcrumb.Item>\n        {extraBreadcrumbItems}\n      </Breadcrumb>\n    )\n  }\n  render() {\n    const { getRouteData } = this.props;\n    return (\n      <div className={styles.wapper}>\n        <div className={styles.sider}>\n          <div className={styles.logo}>\n            <Link to=\"/\">\n              <svg viewBox=\"0 0 256 256\">\n                <path d=\"M84.4999999,25 L133,60.1408731 L114.474648,117 L54.5253515,117 L36,60.1408731 L84.4999999,25 Z M84.4999999,231 L36,195.859127 L54.5253515,139 L114.474648,139 L133,195.859127 L84.4999999,231 Z M220,158.475503 L163.141427,177 L128,128.499472 L163.139977,80 L219.999104,98.5262065 L220,158.475503 Z\"></path>\n              </svg>\n              <h1>UIW React</h1>\n            </Link>\n          </div>\n          <Menu onClose={this.onClose.bind(this)} onSelect={this.onSelect.bind(this)}>\n            {this.getNavMenuItems(this.menus)}\n          </Menu>\n        </div>\n        <div className={styles.content}>\n          <div className={styles.header}>\n            <div className={styles.headerLeft}>\n              <a target=\"_blank\" href=\"https://github.com/uiw-react/uiw-admin\">\n                <Icon type=\"github\" />\n              </a>\n            </div>\n            <div className={styles.headerRight}>\n              <div className={styles.item}>\n                <Icon type=\"lock\" />\n              </div>\n              <div className={styles.item}>\n                <Badge dot count={4}>\n                  <Icon type='bell' />\n                </Badge>\n              </div>\n            </div>\n          </div>\n          <Switch>\n            {getRouteData('BasicLayout').map((item, index) => {\n              return (\n                <Route exact={item.exact} key={item.path} path={item.path} component={item.component} />\n              )\n            })}\n            <Route component={NotFound} />\n          </Switch>\n        </div>\n      </div>\n    )\n  }\n}\n\nCustomRouter.childContextTypes = {\n  location: PropTypes.object,\n  breadcrumbNameMap: PropTypes.object,\n  renderBreadcrumb: PropTypes.node,\n};"]}