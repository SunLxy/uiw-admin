{"version":3,"file":"static/js/222.93a739a0.chunk.js","mappings":"wNAyCA,IACA,EAAe,IAA0B,8DCzCzC,EAAuB,oBAAvB,EAAoD,sB,6BCgJpD,EAxIc,YACKA,EAAAA,EAAAA,MAAjB,IACMC,GAAWC,EAAAA,EAAAA,MAGXC,GAAMC,GADSC,EAAAA,EAAAA,MAAbD,YAEFE,GAAUC,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAsBA,EAAMF,QAAQG,QAAQC,MAAMC,UAC9E,EAA0BC,EAAAA,WAA1B,eAAOC,EAAP,KAAcC,EAAd,KAEQC,GAAUC,EAAAA,EAAAA,IAAOH,EAAQ,CAAC,aAAc,CAC9CI,OAAQ,OACRC,KAAM,CAAEC,SAAU,QAASC,SAAU,WAClC,MAHGL,KAiBR,OAbIA,GAAQA,EAAKM,OACflB,EAAImB,IAAI,SAAR,UAAsBP,IAExBH,EAAAA,WAAgB,WACVG,GAAQA,EAAKM,QACfE,eAAeC,QAAQ,QAAST,EAAKM,OACrCE,eAAeC,QAAQ,OAAQC,KAAKC,UAAUX,EAAKY,UAAY,KAC/D1B,EAAS,YAGV,CAACwB,KAAKC,UAAUX,MAIjB,SAAC,KAAD,CAAKa,QAAQ,SAASC,MAAM,SAASC,MAAO,CAAEC,OAAQ,QAAtD,UACE,UAAC,KAAD,CAAKC,KAAK,IAAV,WACE,gBAAKC,UAAWC,EAAhB,UACE,gBAAKC,IAAKC,EAAMC,IAAI,YAEtB,SAAC,KAAD,CACEC,eAAe,EACfC,SAAU,YAAkB,IAAfC,EAAc,EAAdA,QACLC,EAAgB,GAGtB,GAFKD,EAAQrB,WAAUsB,EAAStB,SAAW,oDACtCqB,EAAQpB,WAAUqB,EAASrB,SAAW,8CACvCsB,OAAOC,KAAKF,GAAUG,OAAS,EAAG,CACpC,IAAMC,EAAW,IAAIC,MAErB,MADAD,EAAIE,MAAQN,EACNI,EAEN/B,EAAS,CAAEK,SAAUqB,EAAQrB,SAAUC,SAAUoB,EAAQpB,YAM7D4B,cAAe,SAACC,GACd,OAAIA,EAAMF,OACD,UAAKE,EAAMF,OAEb,MAETG,OAAQ,CACN/B,SAAU,CACRgC,eAAgB,aAChBC,WAAY,CAAEC,MAAO,KACrBC,SAAU,WACVC,UACE,SAAC,KAAD,CACEC,WAAYlD,EACZmD,QAAQ,OACRC,GAAG,WACHC,YAAY,+BAIlBvC,SAAU,CACR+B,eAAgB,aAChBC,WAAY,CAAEC,MAAO,IACrBC,SAAU,WACVC,UACE,SAAC,KAAD,CACEC,WAAYlD,EACZmD,QAAQ,OACRC,GAAG,WACHE,KAAK,WACLD,YAAY,yBAIlBE,MAAO,CACL/B,MAAO,CAAEgC,OAAQ,GACjBC,UAAW,SAACC,GAAD,OACRA,GAAgB,oDACnBT,UACE,SAAC,KAAD,CAAUC,WAAYlD,EAAS2D,MAAM,IAArC,oDAxDR,SA+DG,YAA4B,IAAzBf,EAAwB,EAAxBA,OAAQgB,EAAgB,EAAhBA,UACV,OACE,iCACE,SAAC,KAAD,WACE,SAAC,KAAD,UAAMhB,EAAO/B,cAEf,SAAC,KAAD,WACE,SAAC,KAAD,UAAM+B,EAAO9B,cAEf,UAAC,KAAD,CAAKU,MAAO,CAAEqC,aAAc,IAA5B,WACE,SAAC,KAAD,CAAKtC,MAAM,SAAX,SAAqBqB,EAAOW,SAC5B,SAAC,KAAD,WACE,cAAGO,KAAK,0BAAR,4CAGJ,SAAC,KAAD,WACE,SAAC,KAAD,WACE,SAAC,KAAD,CACE9D,UAAWA,EACXkD,UAAWU,IACXG,OAAK,EACLT,KAAK,OACLU,SAAS,SALX,qCAeZ,iBAAKrC,UAAWC,EAAhB,kCACmB,cAAGkC,KAAK,+BAAR,kBAAgD,IADnE","sources":["assets/logo-dark.svg","webpack://@examples/base/./src/pages/login/index.module.less?8cfc","pages/login/index.tsx"],"sourcesContent":["var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogoDark(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"256px\",\n    height: \"256px\",\n    viewBox: \"0 0 256 256\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M84.4999999,25 L133,60.1408731 L114.474648,117 L54.5253515,117 L36,60.1408731 L84.4999999,25 Z M84.4999999,231 L36,195.859127 L54.5253515,139 L114.474648,139 L133,195.859127 L84.4999999,231 Z M220,158.475503 L163.141427,177 L128,128.499472 L163.139977,80 L219.999104,98.5262065 L220,158.475503 Z\",\n    id: \"Shape\",\n    fill: \"#4A4A4A\",\n    fillRule: \"nonzero\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogoDark);\nexport default __webpack_public_path__ + \"static/media/logo-dark.241a4efcd56ef257f0a0b143b464cf18.svg\";\nexport { ForwardRef as ReactComponent };","// extracted by mini-css-extract-plugin\nexport default {\"logo\":\"index_logo__Ew1qg\",\"footer\":\"index_footer__JzFhD\"};","import React from 'react';\nimport { Form, Row, Col, Button, Input, Checkbox } from 'uiw';\nimport { useSelector, useDispatch } from 'react-redux';\nimport logo from '../../assets/logo-dark.svg';\nimport styles from './index.module.less';\nimport { RootState, Dispatch } from '@uiw-admin/models';\nimport useSWR, { useSWRConfig, } from 'swr'\nimport { useNavigate, Link, } from 'react-router-dom';\n\nconst Login = () => {\n  const dispatch = useDispatch<Dispatch>()\n  const navigate = useNavigate()\n\n  const { provider } = useSWRConfig() as any\n  const prt = provider()\n  const loading = useSelector((state: RootState) => state.loading.effects.login.submit)\n  const [store, setStore] = React.useState<any>()\n\n  const { data, } = useSWR(store ? ['/api/login', {\n    method: \"POST\",\n    body: { username: \"admin\", password: \"admin\" }\n  }] : null)\n  if (data && data.token) {\n    prt.set(\"login\", { ...data })\n  }\n  React.useEffect(() => {\n    if (data && data.token) {\n      sessionStorage.setItem(\"token\", data.token)\n      sessionStorage.setItem(\"auth\", JSON.stringify(data.authList || []))\n      navigate(\"/home\")\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [JSON.stringify(data)])\n\n\n  return (\n    <Row justify=\"center\" align=\"middle\" style={{ height: '100%' }}>\n      <Col span=\"5\">\n        <div className={styles.logo}>\n          <img src={logo} alt=\"Logo\" />\n        </div>\n        <Form\n          resetOnSubmit={false}\n          onSubmit={({ current }) => {\n            const errorObj: any = {};\n            if (!current.username) errorObj.username = '用户名不能为空！';\n            if (!current.password) errorObj.password = '密码不能为空！';\n            if (Object.keys(errorObj).length > 0) {\n              const err: any = new Error();\n              err.filed = errorObj;\n              throw err;\n            } else {\n              setStore({ username: current.username, password: current.password })\n            }\n            // dispatch.login.submit({\n            //   username: current.username,\n            // });\n          }}\n          onSubmitError={(error: any) => {\n            if (error.filed) {\n              return { ...error.filed };\n            }\n            return null;\n          }}\n          fields={{\n            username: {\n              labelClassName: 'fieldLabel',\n              labelStyle: { width: 160 },\n              labelFor: 'username',\n              children: (\n                <Input\n                  disabled={!!loading}\n                  preIcon=\"user\"\n                  id=\"username\"\n                  placeholder=\"用户名: admin\"\n                />\n              ),\n            },\n            password: {\n              labelClassName: 'fieldLabel',\n              labelStyle: { width: 60 },\n              labelFor: 'password',\n              children: (\n                <Input\n                  disabled={!!loading}\n                  preIcon=\"lock\"\n                  id=\"password\"\n                  type=\"password\"\n                  placeholder=\"密码: admin\"\n                />\n              ),\n            },\n            terms: {\n              style: { margin: 0 },\n              validator: (currentValue) =>\n                !currentValue && '必须统一服务条款',\n              children: (\n                <Checkbox disabled={!!loading} value=\"1\">\n                  已阅读并同意\n                </Checkbox>\n              ),\n            },\n          }}\n        >\n          {({ fields, canSubmit }) => {\n            return (\n              <>\n                <Row>\n                  <Col>{fields.username}</Col>\n                </Row>\n                <Row>\n                  <Col>{fields.password}</Col>\n                </Row>\n                <Row style={{ marginBottom: 10 }}>\n                  <Col align=\"middle\">{fields.terms}</Col>\n                  <Col>\n                    <a href=\"https://uiwjs.github.io\">服务条款</a>\n                  </Col>\n                </Row>\n                <Row>\n                  <Col>\n                    <Button\n                      loading={!!loading}\n                      disabled={!canSubmit()}\n                      block\n                      type=\"dark\"\n                      htmlType=\"submit\"\n                    >\n                      登录\n                    </Button>\n                  </Col>\n                </Row>\n              </>\n            );\n          }}\n        </Form>\n        <div className={styles.footer}>\n          Copyright © 2018 <a href=\"https://github.com/uiwjs/uiw\">@uiw</a>{' '}\n          团队出品\n        </div>\n      </Col>\n    </Row>\n  );\n}\n\nexport default Login;\n"],"names":["useDispatch","navigate","useNavigate","prt","provider","useSWRConfig","loading","useSelector","state","effects","login","submit","React","store","setStore","data","useSWR","method","body","username","password","token","set","sessionStorage","setItem","JSON","stringify","authList","justify","align","style","height","span","className","styles","src","logo","alt","resetOnSubmit","onSubmit","current","errorObj","Object","keys","length","err","Error","filed","onSubmitError","error","fields","labelClassName","labelStyle","width","labelFor","children","disabled","preIcon","id","placeholder","type","terms","margin","validator","currentValue","value","canSubmit","marginBottom","href","block","htmlType"],"sourceRoot":""}